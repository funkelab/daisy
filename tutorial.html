

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daisy Tutorial &mdash; daisy  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Daisy: A Blockwise Task Scheduler" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            daisy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Daisy Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Building-Blocks">Building Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A-Simple-Example:-Local-Smoothing">A Simple Example: Local Smoothing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Distributing-on-the-Cluster">Distributing on the Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Important-Features">Important Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Some-Minimal-Examples">Some Minimal Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Introduction-and-overview">Introduction and overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Environment-setup">Environment setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Multiprocessing">Multiprocessing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Daisy-Tasks">Daisy Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#A-Simple-Task">A Simple Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Failing-blocks">Failing blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Different-read/write-sizes-and-boundary-handling">Different read/write sizes and boundary handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Task-Chaining">Task Chaining</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Map-Reduce-and-Some-simple-benchmarks">Map Reduce and Some simple benchmarks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Simple-data">Simple data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Map">Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Reduce">Reduce</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">daisy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Daisy Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># before we start, we are setting the start method to fork for convenience</span>
<span class="c1"># and for running in a jupyter notebook. This is not always necessary.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">multiprocessing</span>

<span class="n">multiprocessing</span><span class="o">.</span><span class="n">set_start_method</span><span class="p">(</span><span class="s2">&quot;fork&quot;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Daisy-Tutorial">
<h1>Daisy Tutorial<a class="headerlink" href="#Daisy-Tutorial" title="Link to this heading"></a></h1>
<p>Daisy is a library for processing large volumes in parallel. While other libraries (e.g. dask) can perform similar tasks, daisy is optimized for extremely large volumes, out-of-memory operations, and operations where neighboring blocks should not be run at the same time.</p>
<p>In this tutorial, we will cover:</p>
<ul class="simple">
<li><p>daisy terminology and concepts</p></li>
<li><p>running daisy locally with multiprocessing</p></li>
<li><p>running daisy with independent worker processes (e.g., on a compute cluster)</p></li>
<li><p>key features of daisy that make it unique</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Don&#39;t forget to install daisy with dependencies for the docs before running this tutorial:</span>
<span class="c1">#</span>
<span class="c1"># `pip install daisy[docs]``</span>
</pre></div>
</div>
</div>
<section id="Building-Blocks">
<h2>Building Blocks<a class="headerlink" href="#Building-Blocks" title="Link to this heading"></a></h2>
<p>Daisy is designed for processing volumetric data. Therefore, it has specific ways to describe locations in a volume. We will demonstrate the common terms and utilities using this image of astronaut Eileen Collins.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">skimage</span><span class="w"> </span><span class="kn">import</span> <span class="n">data</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">raw_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">astronaut</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">axes_image</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_5_0.png" src="_images/tutorial_5_0.png" />
</div>
</div>
<p>###Coordinate</p>
<ul class="simple">
<li><p>A daisy Coordinate is essentially a tuple with one value per spatial dimension. In our case, the Coordinates are two-dimensional.</p></li>
<li><p>Daisy coordinates can represent points in the volume, or distances in the volume.</p></li>
<li><p>Daisy mostly passes around abstract placeholders of the data. Therefore, a Coordinate does not contain data, it is simply a pointer to a location in a volume.</p></li>
<li><p>The main difference between a Coordinate and a tuple is that operations (e.g. addition) between Coordinates are performed pointwise, to match the spatial definition.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">daisy.Coordinate</span></code> is an alias of <code class="docutils literal notranslate"><span class="pre">`funlib.geometry.Coordinate</span></code> &lt;<a class="reference external" href="https://github.com/funkelab/funlib.geometry/blob/main/funlib/geometry/coordinate.py">https://github.com/funkelab/funlib.geometry/blob/main/funlib/geometry/coordinate.py</a>&gt;`__</p>
<p>Here are some example Coordinates, and a visualization of their location on the Eileen Collins volume.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">daisy</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># white</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="mi">452</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>  <span class="c1"># yellow</span>
<span class="n">p3</span> <span class="o">=</span> <span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span>  <span class="c1"># orange</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">display_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>


<span class="n">figure</span> <span class="o">=</span> <span class="n">axes_image</span><span class="o">.</span><span class="n">figure</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">point</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">]):</span>
    <span class="n">display_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">figure</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_8_0.png" src="_images/tutorial_8_0.png" />
</div>
</div>
<p>###Roi A Roi (Region of interest) is a bounding box in a volume. It is defined by two Coordinates:</p>
<ul class="simple">
<li><p>offset: the starting corner of the bounding box relative to the origin</p></li>
<li><p>shape: The extent of the bounding box in each dimension</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">daisy.Roi</span></code> is an alias of <code class="docutils literal notranslate"><span class="pre">`funlib.geometry.Roi</span></code> &lt;<a class="reference external" href="https://github.com/funkelab/funlib.geometry/blob/main/funlib/geometry/roi.py">https://github.com/funkelab/funlib.geometry/blob/main/funlib/geometry/roi.py</a>&gt;`__. Rois have operations like grow, shift, and intersect, that represent spatial manipulations</p>
<p>Here are some example Rois and their visualization in our Eileen Collins volume. Remember, the Roi does not contain the data! It is simply a bounding box.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">head</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">150</span><span class="p">))</span>  <span class="c1"># purple</span>
<span class="c1"># to get the Roi of the nose, we will shrink the head Roi by a certain amount in x and y on each side of the Roi</span>
<span class="c1"># the first argument will move the corner closest to the origin, and the second argument will move the corner furthest from the origin</span>
<span class="n">nose</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">55</span><span class="p">),</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">55</span><span class="p">))</span>  <span class="c1"># orange</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">330</span><span class="p">,</span> <span class="mi">350</span><span class="p">))</span>  <span class="c1"># grey</span>
<span class="c1"># to get the neck, we will intersect the body and the head rois</span>
<span class="n">neck</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>  <span class="c1"># blue</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rectangle</span>


<span class="k">def</span><span class="w"> </span><span class="nf">display_roi</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
    <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">roi</span><span class="o">.</span><span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">roi</span><span class="o">.</span><span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">fresh_image</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">axes_image</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">)</span>
    <span class="n">figure</span> <span class="o">=</span> <span class="n">axes_image</span><span class="o">.</span><span class="n">figure</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">figure</span>


<span class="n">figure</span> <span class="o">=</span> <span class="n">fresh_image</span><span class="p">()</span>
<span class="k">for</span> <span class="n">roi</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="n">head</span><span class="p">,</span> <span class="n">nose</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">neck</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;purple&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]):</span>
    <span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_11_0.png" src="_images/tutorial_11_0.png" />
</div>
</div>
<p>###Array So far we have seen how to specify regions of the data with Rois and Coordinates, which do not contain any data. However, eventually you will need to access the actual data using your Rois! For this, we use <code class="docutils literal notranslate"><span class="pre">`funlib.persistence.arrays.Array</span></code> &lt;<a class="reference external" href="https://github.com/funkelab/funlib.persistence/blob/f5310dddb346585a28f3cb44f577f77d4f5da07c/funlib/persistence/arrays/array.py">https://github.com/funkelab/funlib.persistence/blob/f5310dddb346585a28f3cb44f577f77d4f5da07c/funlib/persistence/arrays/array.py</a>&gt;`__. If you are familiar with dask, this is the daisy equivalent of dask arrays.</p>
<p>The core information about the <code class="docutils literal notranslate"><span class="pre">funlib.persistence.arrays.Array</span></code> class is that you can slice them with Rois, along with normal numpy-like slicing. However, in order to support this type of slicing, we need to also know the Roi of the whole Array. Here we show you how to create an array from our raw data that is held in memory as a numpy array. However, we highly recommend using a zarr backend, and will show this in our simple example next!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">Array</span>

<span class="c1"># daisy Arrays expect the channel dimension first, but our sklearn loaded image has channels last - let&#39;s fix that</span>
<span class="n">raw_data_reshaped</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New data shape:&quot;</span><span class="p">,</span> <span class="n">raw_data_reshaped</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># we need the spatial extend of the data</span>
<span class="n">data_spatial_shape</span> <span class="o">=</span> <span class="n">raw_data_reshaped</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Spatial shape:&quot;</span><span class="p">,</span> <span class="n">data_spatial_shape</span><span class="p">)</span>

<span class="c1"># Roi of the whole volume</span>
<span class="n">total_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">shape</span><span class="o">=</span><span class="n">data_spatial_shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total dataset roi:&quot;</span><span class="p">,</span> <span class="n">total_roi</span><span class="p">)</span>

<span class="n">raw_array</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">raw_data_reshaped</span><span class="p">,</span>
    <span class="n">offset</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span>
    <span class="n">voxel_size</span><span class="o">=</span><span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New data shape: (3, 512, 512)
Spatial shape: (512, 512)
Total dataset roi: [0:512, 0:512] (512, 512)
</pre></div></div>
</div>
<p>Now we can demonstrate how to access data from an Array using a Roi</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># slicing an Array with a Roi gives you a numpy array</span>
<span class="n">head_data</span> <span class="o">=</span> <span class="n">raw_array</span><span class="p">[</span><span class="n">head</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">head_data</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span>
<span class="p">)</span>  <span class="c1"># need to transpose channels back to the end for matplotlib to work</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff54166180&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_15_1.png" src="_images/tutorial_15_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># you can also combine the two steps</span>
<span class="n">body_data</span> <span class="o">=</span> <span class="n">raw_array</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">body_data</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff2b51e7b0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_16_1.png" src="_images/tutorial_16_1.png" />
</div>
</div>
<p>###Block</p>
<p>Daisy is a blockwise task scheduler. Therefore, the concept of a block is central to Daisy. To efficiently process large volumes, Daisy splits the whole volume into a set of adjacent blocks that cover the whole image. These blocks are what is passed between the scheduler and the workers.</p>
<p>A Block is simply a (set of) Roi(s), and does not contain data. In practice, it has additional information that is useful to the daisy server and workers to help them perform their task, which we will decribe below:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s define a Block of our Eileen Collins volume</span>
<span class="c1"># In practice, you will never need to make a block - the daisy scheduler will do this for you</span>

<span class="n">block_size</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
<span class="n">block_origin</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">block_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">(</span><span class="n">block_origin</span><span class="p">,</span> <span class="n">block_size</span><span class="p">)</span>

<span class="n">block</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Here are all the attributes of the block</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Block id:&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">block_id</span>
<span class="p">)</span>  <span class="c1"># a unique ID for each block given the total roi of the volume</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Block read roi:&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">read_roi</span>
<span class="p">)</span>  <span class="c1"># the Roi which represents the location in the volume of the input data to the process</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Block write roi:&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">write_roi</span>
<span class="p">)</span>  <span class="c1"># the Roi which represents the location in the volume where the process should write the output data</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Block status:&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">status</span>
<span class="p">)</span>  <span class="c1"># The status of the block (e.g. created, in progress, succeeded, failed)</span>

<span class="c1"># let&#39;s look at the write roi of our block on top of the original figure</span>
<span class="n">figure</span> <span class="o">=</span> <span class="n">fresh_image</span><span class="p">()</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Block id: (None, 12)
Block read roi: [128:192, 128:192] (64, 64)
Block write roi: [128:192, 128:192] (64, 64)
Block status: BlockStatus.CREATED
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_18_1.png" src="_images/tutorial_18_1.png" />
</div>
</div>
<p>You may be wondering why the block has a read roi and a write roi - this will be illustrated next in our simple daisy example!</p>
</section>
<section id="A-Simple-Example:-Local-Smoothing">
<h2>A Simple Example: Local Smoothing<a class="headerlink" href="#A-Simple-Example:-Local-Smoothing" title="Link to this heading"></a></h2>
<p>In this next example, we will use gaussian smoothing to illustrate how to parallize a task on your local machine using daisy.</p>
<p>###Dataset Preparation As mentioned earlier, we highly recommend using a zarr/n5 backend for your volume. Daisy is designed such that no data is transmitted between the worker and the scheduler, including the output of the processing. That means that each worker is responsible for saving the results in the given block write_roi. With a zarr backend, each worker can write to a specific region of the zarr in parallel, assuming that the chunk size is a divisor of and aligned with the write_roi. The
zarr dataset must exist before you start scheduling though - we recommend using <code class="docutils literal notranslate"><span class="pre">`funlib.persistence.prepare_ds</span></code> &lt;<a class="reference external" href="https://github.com/funkelab/funlib.persistence/blob/f5310dddb346585a28f3cb44f577f77d4f5da07c/funlib/persistence/arrays/datasets.py#L423">https://github.com/funkelab/funlib.persistence/blob/f5310dddb346585a28f3cb44f577f77d4f5da07c/funlib/persistence/arrays/datasets.py#L423</a>&gt;`__ function to prepare the dataset. Then later, you can use <code class="docutils literal notranslate"><span class="pre">`funlib.persistence.open_ds</span></code> &lt;<a class="reference external" href="https://github.com/funkelab/funlib.persistence/blob/f5310dddb346585a28f3cb44f577f77d4f5da07c/funlib/persistence/arrays/datasets.py#L328">https://github.com/funkelab/funlib.persistence/blob/f5310dddb346585a28f3cb44f577f77d4f5da07c/funlib/persistence/arrays/datasets.py#L328</a>&gt;`__ to open the
dataset and it will automatically read the metadata and wrap it into a <code class="docutils literal notranslate"><span class="pre">funlib.persistence.Array</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">zarr</span>

<span class="c1"># convert our data to float, because gaussian smoothing in scikit expects float input and output</span>
<span class="c1"># recall that we already reshaped it to put channel dimension first, as the funlib.persistence Array expects</span>
<span class="n">raw_data_float</span> <span class="o">=</span> <span class="n">raw_data_reshaped</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>

<span class="c1"># store image in zarr container</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="p">[</span><span class="s2">&quot;raw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw_data_float</span>
<span class="n">f</span><span class="p">[</span><span class="s2">&quot;raw&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">f</span><span class="p">[</span><span class="s2">&quot;raw&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;resolution&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">(</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>  <span class="c1"># this attribute holds the voxel size</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence</span><span class="w"> </span><span class="kn">import</span> <span class="n">prepare_ds</span>
<span class="c1"># prepare an output dataset with a chunk size that is a divisor of the block roi</span>

<span class="n">n_channels</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># our output will be an RGB image as well</span>
<span class="n">prepare_ds</span><span class="p">(</span>
    <span class="s2">&quot;sample_data.zarr/smoothed&quot;</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_channels</span><span class="p">,</span> <span class="o">*</span><span class="n">total_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span>
    <span class="n">offset</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span>  <span class="c1"># if your output has a different total_roi than your input, you would need to change this</span>
    <span class="n">voxel_size</span><span class="o">=</span><span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
    <span class="n">dtype</span><span class="o">=</span><span class="n">raw_data_float</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
    <span class="c1"># The write size is important! If you don&#39;t set this correctly, your workers will have race conditions</span>
    <span class="c1"># when writing to the same file, resulting in expected behavior or weird errors.</span>
    <span class="c1"># The prepare_ds function takes care of making zarr chunk sizes that evenly divide your write size</span>
    <span class="n">chunk_shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_channels</span><span class="p">,</span> <span class="o">*</span><span class="n">block_size</span><span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of output dataset:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;smoothed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Chunk size in output dataset:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;smoothed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">chunks</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Shape of output dataset: (3, 512, 512)
Chunk size in output dataset: (3, 64, 64)
</pre></div></div>
</div>
<p>###Define our Process Function When run locally, daisy process functions must take a block as the only argument. Depending on the multiprocessing spawn function settings on your computer, the function might not inherit the imports and variables of the scope where the scheudler is run, so it is always safer to import and define everything inside the function.</p>
<p>Here is an example for smoothing. Generally, daisy process functions have the following three steps:</p>
<ol class="arabic simple">
<li><p>Load the data from disk</p></li>
<li><p>Process the data</p></li>
<li><p>Save the result to disk</p></li>
</ol>
<p>Note that for now, the worker has to know where to load the data from and save the result to. Later we will show you ways around the rule that the process function must only take the block as input, to allow you to pass that information in when you start the scheduler.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">smooth</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">):</span>
    <span class="c1"># imports and hyperaparmeters inside scope, to be safe</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">skimage</span><span class="w"> </span><span class="kn">import</span> <span class="n">filters</span>

    <span class="n">sigma</span> <span class="o">=</span> <span class="mf">5.0</span>

    <span class="c1"># open the raw dataset as an Array</span>
    <span class="n">raw_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span>
        <span class="s2">&quot;sample_data.zarr/raw&quot;</span><span class="p">,</span>
        <span class="s2">&quot;r&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Read the data in the block read roi and turn it into a numpy array</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">raw_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">)</span>
    <span class="c1"># smooth the data using the gaussian filter from skimage</span>
    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">filters</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># open the output smoothed dataset as an Array</span>
    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr/smoothed&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="c1"># save the result in the output dataset using the block write roi</span>
    <span class="n">output_ds</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">smoothed</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s test the data on our block that we defined earlier and visualize the result</span>
<span class="n">smooth</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff5594fb90&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_26_1.png" src="_images/tutorial_26_1.png" />
</div>
</div>
<p>###Run daisy with local multiprocessing We are about ready to run daisy! We need to tell the scheduler the following pieces of information:</p>
<ul class="simple">
<li><p>The process function, which takes a block as an argument</p></li>
<li><p>The total roi to process (in our case, the whole image)</p></li>
<li><p>The read roi and write roi of each block (the shape and relative offset are what is important, since they will be shifted as a pair to tile the total_roi)</p></li>
<li><p>How many workers to spawn</p></li>
</ul>
<p>These pieces of information get wrapped into a <code class="docutils literal notranslate"><span class="pre">`daisy.Task</span></code> &lt;<a class="reference external" href="https://github.com/funkelab/daisy/blob/master/daisy/task.py">https://github.com/funkelab/daisy/blob/master/daisy/task.py</a>&gt;`__, along with a name for the task. Then the <code class="docutils literal notranslate"><span class="pre">daisy.run_blockwise</span></code> function starts the scheduler, which creates all the blocks that tile the total roi, spawns the workers, distributes the blocks to the workers, and reports if the blocks were successfully processed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
            <span class="s2">&quot;Smoothing&quot;</span><span class="p">,</span>  <span class="c1"># task name</span>
            <span class="n">process_function</span><span class="o">=</span><span class="n">smooth</span><span class="p">,</span>  <span class="c1"># a function that takes a block as argument</span>
            <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="p">,</span>  <span class="c1"># The whole roi of the image</span>
            <span class="n">read_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>  <span class="c1"># The roi that the worker should read from</span>
            <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>  <span class="c1"># the roi that the worker should write to</span>
            <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "dcbc135db78d493eb6760566c9ca0a96", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Smoothing:

    num blocks : 64
    completed ✔: 64 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff2b496180&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_29_1.png" src="_images/tutorial_29_1.png" />
</div>
</div>
<p>###Take 2: Add context! The task ran successfully, but you’ll notice that there are edge artefacts where the blocks border each other. This is because each worker only sees the inside of the block, and it needs more context to smooth seamlessly between blocks. If we increase the size of the read_roi so that each block sees all pixels that contribute meaningfully to the smoothed values in the interior (write_roi) of the block, the edge artefacts should disappear.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sigma</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">context</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sigma</span>  <span class="c1"># pixels beyond 2*sigma contribute almost nothing to the output</span>
<span class="n">block_read_roi</span> <span class="o">=</span> <span class="n">block_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="n">block_write_roi</span> <span class="o">=</span> <span class="n">block_roi</span>
<span class="c1"># we also grow the total roi by the context, so that the write_rois are still in the same place when we tile</span>
<span class="n">total_read_roi</span> <span class="o">=</span> <span class="n">total_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="n">block</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">block_read_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">block_write_roi</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># let&#39;s look at the new block rois</span>
<span class="n">figure</span> <span class="o">=</span> <span class="n">fresh_image</span><span class="p">()</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">)</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_31_0.png" src="_images/tutorial_31_0.png" />
</div>
</div>
<p>Let’s prepare another dataset to store our new and improved smoothing result in. We will be doing this repeatedly through the rest of the tutorial, so we define a helper function to prepare a smoothing result in a given group in the <code class="docutils literal notranslate"><span class="pre">sample_data.zarr</span></code>. We also define a helper function for deleting a dataset, in case you want to re-run a processing step and see a new result.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">prepare_smoothing_ds</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
    <span class="n">prepare_ds</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="o">*</span><span class="n">total_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span>
        <span class="n">voxel_size</span><span class="o">=</span><span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
        <span class="n">dtype</span><span class="o">=</span><span class="n">raw_data_float</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
        <span class="n">chunk_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="o">*</span><span class="n">block_size</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">delete_ds</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
        <span class="k">del</span> <span class="n">root</span><span class="p">[</span><span class="n">group</span><span class="p">]</span>


<span class="n">output_group</span> <span class="o">=</span> <span class="s2">&quot;smoothed_with_context&quot;</span>
<span class="n">prepare_smoothing_ds</span><span class="p">(</span><span class="n">output_group</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now we have to adapt our process function to crop the output before saving. It would be nice to be able to pass the output group in as an argument, so we will show you a workaround using <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> to partially evaluate the function. To use this workaround, your process function must have the block as the last argument.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">smooth_in_block</span><span class="p">(</span><span class="n">output_group</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">):</span>
    <span class="c1"># imports and hyperaparmeters inside scope, to be safe</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span><span class="p">,</span> <span class="n">Array</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">skimage</span><span class="w"> </span><span class="kn">import</span> <span class="n">filters</span>

    <span class="n">sigma</span> <span class="o">=</span> <span class="mf">5.0</span>
    <span class="c1"># open the raw dataset as an Array</span>
    <span class="n">raw_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span>
        <span class="s2">&quot;sample_data.zarr/raw&quot;</span><span class="p">,</span>
        <span class="s2">&quot;r&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Read the data in the block read roi and turn it into a numpy array</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">raw_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span>
        <span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>  <span class="c1"># NOTE: this fill value allows you to read outside the total_roi without erroring</span>
    <span class="c1"># smooth the data using the gaussian filter from skimage</span>
    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">filters</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># open the output smoothed dataset as an Array</span>
    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">output_group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="c1"># turn the smoothed result into an Array so we can crop it with a Roi (you can also center crop it by the context manually, but this is easier!)</span>
    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">smoothed</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">voxel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="c1"># save the result in the output dataset using the block write roi</span>
    <span class="n">output_ds</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">smoothed</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now we can re-run daisy. Note these changes from the previous example:</p>
<ul class="simple">
<li><p>using <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> to partially evaluate our <code class="docutils literal notranslate"><span class="pre">smooth_in_block</span></code> function , turning it into a function that only takes the block as an argument</p></li>
<li><p>the total_roi is now expanded to include the context, as is the read_roi</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span>

<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
            <span class="s2">&quot;Smoothing with context&quot;</span><span class="p">,</span>
            <span class="n">process_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">smooth_in_block</span><span class="p">,</span> <span class="n">output_group</span><span class="p">),</span>
            <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
            <span class="n">read_roi</span><span class="o">=</span><span class="n">block_read_roi</span><span class="p">,</span>
            <span class="n">write_roi</span><span class="o">=</span><span class="n">block_write_roi</span><span class="p">,</span>
            <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">],</span>
    <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "b425473af0af4e8094da5fd516ada653", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Smoothing with context:

    num blocks : 64
    completed ✔: 64 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
defaultdict(daisy.task_state.TaskState,
            {&#39;Smoothing with context&#39;: Started: True
             Total Blocks: 64
             Ready: 0
             Processing: 0
             Pending: 0
             Completed: 64
             Skipped: 0
             Failed: 0
             Orphaned: 0})
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed_with_context&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff557263f0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_38_1.png" src="_images/tutorial_38_1.png" />
</div>
</div>
<p>Success! Notice that there is a fade to black at the border, due to the <code class="docutils literal notranslate"><span class="pre">fill_value=0</span></code> argument used when reading the data from the input Array. Smoothing is poorly defined at the border of the volume - if you want different behavior, you can expand the input array to include extended data of your choice at the border, or shrink the total output roi by the context to only include the section of the output that depends on existing data.</p>
<p>###Conclusion: Dask and Daisy</p>
<p>Congrats! You have learned the basics of Daisy. In this example, we only parallelized the processing using our local computer’s resources, and our “volume” was very small.</p>
<p>If your task is similar to this example, you can use dask to do the same task with many fewer lines of code:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install dask
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/runner/work/daisy/daisy/.venv/bin/python: No module named pip
Note: you may need to restart the kernel to use updated packages.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">dask.array</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">da</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">skimage</span><span class="w"> </span><span class="kn">import</span> <span class="n">filters</span>


<span class="n">f</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">from_array</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;raw&quot;</span><span class="p">],</span> <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Raw dask array:&quot;</span><span class="p">,</span> <span class="n">raw</span><span class="p">)</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">context</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>


<span class="k">def</span><span class="w"> </span><span class="nf">smooth_in_block_dask</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">filters</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>


<span class="n">smoothed</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">map_overlap</span><span class="p">(</span><span class="n">smooth_in_block_dask</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smoothed</span><span class="o">.</span><span class="n">transpose</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Raw dask array: dask.array&lt;array, shape=(3, 512, 512), dtype=float32, chunksize=(3, 64, 64), chunktype=numpy.ndarray&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff2b4ba2d0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_42_2.png" src="_images/tutorial_42_2.png" />
</div>
</div>
<p>For many situations, both dask and daisy can work well. Indeed, for some tasks, dask is simpler and better suited, as it does for you many things that daisy leaves to you to implement. One key difference between dask and daisy is that in dask, functions are not supposed to have side effects. In daisy, functions can have side effects, allowing blocks to depend on other blocks in the scheduling order (see the last two examples in this tutorial about task chaining and read-write conflicts).</p>
<p>In general, daisy is designed for…</p>
<ul class="simple">
<li><p>Cases where you want to be able to pick up where you left off after an error, rather than starting the whole task over (because blocks that finished saved their results to disk)</p></li>
<li><p>Cases where blocks should be executed in a particular order, so that certain blocks see other blocks outputs (without passing the output through the scheduler)</p></li>
<li><p>Cases where the worker function needs setup and teardown that takes longer than processing a block (see our next example!)</p></li>
</ul>
</section>
<section id="Distributing-on-the-Cluster">
<h2>Distributing on the Cluster<a class="headerlink" href="#Distributing-on-the-Cluster" title="Link to this heading"></a></h2>
<p>While daisy can run locally, it is designed to shine in a cluster computing environment. The only information passed between scheduler and workers are Blocks, which are extremely lightweight and are communicated through TCP. Therefore, workers can be distributed on the cluster with minimal communication overhead.</p>
<p>Let’s re-do our smoothing, but this time run each worker as a completely separate subprocess, as would be needed on a cluster. First, we prepare the output dataset.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># first, prepare the dataset</span>
<span class="n">prepare_smoothing_ds</span><span class="p">(</span><span class="s2">&quot;smoothed_subprocess&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Then, we prepare our process function. This time, it has two parts. The first part is the function defined in the cell below, and essentially just calls <code class="docutils literal notranslate"><span class="pre">subprocess.run</span></code> locally or with bsub, as an example compute environment. The second part is the external python script that is actually executed in the <code class="docutils literal notranslate"><span class="pre">subprocess.run</span></code> call.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># new process function to start the worker subprocess</span>
<span class="k">def</span><span class="w"> </span><span class="nf">start_subprocess_worker</span><span class="p">(</span><span class="n">cluster</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>

    <span class="k">if</span> <span class="n">cluster</span> <span class="o">==</span> <span class="s2">&quot;bsub&quot;</span><span class="p">:</span>
        <span class="c1"># this is where you define your cluster arguments specific to your task (gpus, cpus, etc)</span>
        <span class="n">num_cpus_per_worker</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;bsub&quot;</span><span class="p">,</span>
                <span class="s2">&quot;-I&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;-n </span><span class="si">{</span><span class="n">num_cpus_per_worker</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="s2">&quot;./tutorial_worker.py&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tutorial_config.json&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">cluster</span> <span class="o">==</span> <span class="s2">&quot;local&quot;</span><span class="p">:</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;tutorial_worker.py&quot;</span><span class="p">,</span> <span class="s2">&quot;tutorial_config.json&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only bsub and local currently supported for this tutorial&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Code from tutorial_worker.py, copied here for convenience (Note: running this cell won’t run the code, because it is a markdown cell)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">daisy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span><span class="p">,</span> <span class="n">Array</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">skimage</span><span class="w"> </span><span class="kn">import</span> <span class="n">filters</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>


<span class="c1">## This function is the same as the local function, but we can pass as many different arguments as we want, and we don&#39;t need to import inside it</span>
<span class="k">def</span><span class="w"> </span><span class="nf">smooth_in_block</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="n">sigma</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;sigma&quot;</span><span class="p">]</span>
    <span class="n">raw_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;input_zarr&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;input_group&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">raw_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">filters</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;output_zarr&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;output_group&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">smoothed</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">voxel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">output_ds</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">smoothed</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># load a config path or other parameters from the sysargs (recommended to use argparse argument parser for anything more complex)</span>
    <span class="n">config_path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># load the config</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="c1"># simulate long setup time (e.g. loading a model)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

    <span class="c1"># set up the daisy client (this is done by daisy automatically in the local example)</span>
    <span class="c1"># it depends on environment variables to determine configuration</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># ask for a block from the scheduler</span>
        <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">acquire_block</span><span class="p">()</span> <span class="k">as</span> <span class="n">block</span><span class="p">:</span>

            <span class="c1"># The scheduler will return None when there are no more blocks left</span>
            <span class="k">if</span> <span class="n">block</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="c1"># process your block!</span>
            <span class="c1"># Note: you can now define whatever function signature you want, rather than being limited to one block argument</span>
            <span class="n">smooth_in_block</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>The most important thing to notice about the new worker script is the use of the <code class="docutils literal notranslate"><span class="pre">client.acquire_block()</span></code> function. If you provide a process function that takes a block as input, as we did previously, daisy will create the <code class="docutils literal notranslate"><span class="pre">daisy.Client</span></code>, <code class="docutils literal notranslate"><span class="pre">while</span></code> loop, and <code class="docutils literal notranslate"><span class="pre">client.acquire_block()</span></code> context for you. If you provide a process function with no arguments, the worker is expected to set up the client and request blocks.</p>
<p>Doing the <code class="docutils literal notranslate"><span class="pre">daisy.Client</span></code> set up yourself is helpful when worker startup is expensive - loading saved network weights can be more expensive than actually predicting for one block, so you definitely would not want to load the model separately for each block. We have simulated this by using time.sleep() in the setup of the worker, so when you run the next cell, it should take 20 seconds to start up and then the blocks should process quickly after that.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># note: Must be on submit node to run this with bsub argument</span>
<span class="c1"># For Janelians: Don&#39;t use the login node to run the scheduler!</span>
<span class="c1">#     Instead, use the submit node, which can handle more computational load</span>
<span class="n">tutorial_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;smoothing_subprocess&quot;</span><span class="p">,</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">block_read_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">block_write_roi</span><span class="p">,</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">start_subprocess_worker</span><span class="p">,</span> <span class="s2">&quot;local&quot;</span><span class="p">),</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">tutorial_task</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "41d0dbf17b5b467cb0b185e5aedf4960", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task smoothing_subprocess:

    num blocks : 64
    completed ✔: 64 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed_subprocess&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff2adfe180&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_51_1.png" src="_images/tutorial_51_1.png" />
</div>
</div>
</section>
<section id="Important-Features">
<h2>Important Features<a class="headerlink" href="#Important-Features" title="Link to this heading"></a></h2>
<p>There are a few more features that you should know about to take full advantage of daisy!</p>
<p>###Fault tolerance and the pre-check function</p>
<p>Even if your code is completely bug-free, things will always go wrong eventually when scaling up to millions of workers. Perhaps your node on the cluster was shared with another process that temporarily hogged too much memory, or you forgot to set a longer timeout and the process was killed after 8 hours. Let’s see how daisy can help you handle these issues, by seeing what happens when we add random failures to our smoothing task.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># as always, prepare a new output smoothing  dataset</span>
<span class="n">prepare_smoothing_ds</span><span class="p">(</span><span class="s2">&quot;fault_tolerance&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># simulate failing 50% of the time</span>
<span class="k">def</span><span class="w"> </span><span class="nf">smooth_in_block_with_failure</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span><span class="p">,</span> <span class="n">Array</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">skimage</span><span class="w"> </span><span class="kn">import</span> <span class="n">filters</span>

    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Simulating random failure&quot;</span><span class="p">)</span>

    <span class="n">sigma</span> <span class="o">=</span> <span class="mf">5.0</span>

    <span class="n">raw_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span>
        <span class="s2">&quot;sample_data.zarr/raw&quot;</span><span class="p">,</span>
        <span class="s2">&quot;r&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">raw_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">filters</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr/fault_tolerance&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>

    <span class="n">smoothed</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">smoothed</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">voxel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">output_ds</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">smoothed</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sigma</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">context</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
<span class="n">read_roi</span> <span class="o">=</span> <span class="n">block_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
            <span class="s2">&quot;fault tolerance test&quot;</span><span class="p">,</span>
            <span class="n">process_function</span><span class="o">=</span><span class="n">smooth_in_block_with_failure</span><span class="p">,</span>
            <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
            <span class="n">read_roi</span><span class="o">=</span><span class="n">read_roi</span><span class="p">,</span>
            <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
            <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "bb0f4ba8696e4fb9acd726e2f21463ab", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Block fault tolerance test/0 with read ROI [-10:74, -10:74] (84, 84) and write ROI [0:64, 0:64] (64, 64) failed in worker 7 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/15 with read ROI [-10:74, 310:394] (84, 84) and write ROI [0:64, 320:384] (64, 64) failed in worker 7 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/21 with read ROI [-10:74, 374:458] (84, 84) and write ROI [0:64, 384:448] (64, 64) failed in worker 8 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/28 with read ROI [-10:74, 438:522] (84, 84) and write ROI [0:64, 448:512] (64, 64) failed in worker 9 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/4 with read ROI [54:138, 54:138] (84, 84) and write ROI [64:128, 64:128] (64, 64) failed in worker 7 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/7 with read ROI [54:138, 118:202] (84, 84) and write ROI [64:128, 128:192] (64, 64) failed in worker 11 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/22 with read ROI [54:138, 310:394] (84, 84) and write ROI [64:128, 320:384] (64, 64) failed in worker 7 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=7 failed too many times, restarting this worker...
Block fault tolerance test/5 with read ROI [118:202, -10:74] (84, 84) and write ROI [128:192, 0:64] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/12 with read ROI [118:202, 118:202] (84, 84) and write ROI [128:192, 128:192] (64, 64) failed in worker 9 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/17 with read ROI [118:202, 182:266] (84, 84) and write ROI [128:192, 192:256] (64, 64) failed in worker 11 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/23 with read ROI [118:202, 246:330] (84, 84) and write ROI [128:192, 256:320] (64, 64) failed in worker 10 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/30 with read ROI [118:202, 310:394] (84, 84) and write ROI [128:192, 320:384] (64, 64) failed in worker 9 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/9 with read ROI [182:266, -10:74] (84, 84) and write ROI [192:256, 0:64] (64, 64) failed in worker 10 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/31 with read ROI [182:266, 246:330] (84, 84) and write ROI [192:256, 256:320] (64, 64) failed in worker 10 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/58 with read ROI [182:266, 438:522] (84, 84) and write ROI [192:256, 448:512] (64, 64) failed in worker 12 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/19 with read ROI [246:330, 54:138] (84, 84) and write ROI [256:320, 64:128] (64, 64) failed in worker 10 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=10 failed too many times, restarting this worker...
Block fault tolerance test/25 with read ROI [246:330, 118:202] (84, 84) and write ROI [256:320, 128:192] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/32 with read ROI [246:330, 182:266] (84, 84) and write ROI [256:320, 192:256] (64, 64) failed in worker 11 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/40 with read ROI [246:330, 246:330] (84, 84) and write ROI [256:320, 256:320] (64, 64) failed in worker 12 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/49 with read ROI [246:330, 310:394] (84, 84) and write ROI [256:320, 320:384] (64, 64) failed in worker 9 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=9 failed too many times, restarting this worker...
Block fault tolerance test/59 with read ROI [246:330, 374:458] (84, 84) and write ROI [256:320, 384:448] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/70 with read ROI [246:330, 438:522] (84, 84) and write ROI [256:320, 448:512] (64, 64) failed in worker 8 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/41 with read ROI [310:394, 182:266] (84, 84) and write ROI [320:384, 192:256] (64, 64) failed in worker 12 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/50 with read ROI [310:394, 246:330] (84, 84) and write ROI [320:384, 256:320] (64, 64) failed in worker 11 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=11 failed too many times, restarting this worker...
Block fault tolerance test/71 with read ROI [310:394, 374:458] (84, 84) and write ROI [320:384, 384:448] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/27 with read ROI [374:458, -10:74] (84, 84) and write ROI [384:448, 0:64] (64, 64) failed in worker 14 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/34 with read ROI [374:458, 54:138] (84, 84) and write ROI [384:448, 64:128] (64, 64) failed in worker 12 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=12 failed too many times, restarting this worker...
Block fault tolerance test/42 with read ROI [374:458, 118:202] (84, 84) and write ROI [384:448, 128:192] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/51 with read ROI [374:458, 182:266] (84, 84) and write ROI [384:448, 192:256] (64, 64) failed in worker 14 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/35 with read ROI [438:522, -10:74] (84, 84) and write ROI [448:512, 0:64] (64, 64) failed in worker 13 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/43 with read ROI [438:522, 54:138] (84, 84) and write ROI [448:512, 64:128] (64, 64) failed in worker 8 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/62 with read ROI [438:522, 182:266] (84, 84) and write ROI [448:512, 192:256] (64, 64) failed in worker 14 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/73 with read ROI [438:522, 246:330] (84, 84) and write ROI [448:512, 256:320] (64, 64) failed in worker 13 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/0 with read ROI [-10:74, -10:74] (84, 84) and write ROI [0:64, 0:64] (64, 64) failed in worker 16 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/15 with read ROI [-10:74, 310:394] (84, 84) and write ROI [0:64, 320:384] (64, 64) failed in worker 13 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/28 with read ROI [-10:74, 438:522] (84, 84) and write ROI [0:64, 448:512] (64, 64) failed in worker 15 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/5 with read ROI [118:202, -10:74] (84, 84) and write ROI [128:192, 0:64] (64, 64) failed in worker 15 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/17 with read ROI [118:202, 182:266] (84, 84) and write ROI [128:192, 192:256] (64, 64) failed in worker 16 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/9 with read ROI [182:266, -10:74] (84, 84) and write ROI [192:256, 0:64] (64, 64) failed in worker 14 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=14 failed too many times, restarting this worker...
Block fault tolerance test/58 with read ROI [182:266, 438:522] (84, 84) and write ROI [192:256, 448:512] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/19 with read ROI [246:330, 54:138] (84, 84) and write ROI [256:320, 64:128] (64, 64) failed in worker 16 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/25 with read ROI [246:330, 118:202] (84, 84) and write ROI [256:320, 128:192] (64, 64) failed in worker 13 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=13 failed too many times, restarting this worker...
Block fault tolerance test/40 with read ROI [246:330, 246:330] (84, 84) and write ROI [256:320, 256:320] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/32 with read ROI [246:330, 182:266] (84, 84) and write ROI [256:320, 192:256] (64, 64) failed in worker 15 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/59 with read ROI [246:330, 374:458] (84, 84) and write ROI [256:320, 384:448] (64, 64) failed in worker 8 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=8 failed too many times, restarting this worker...
Block fault tolerance test/70 with read ROI [246:330, 438:522] (84, 84) and write ROI [256:320, 448:512] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/41 with read ROI [310:394, 182:266] (84, 84) and write ROI [320:384, 192:256] (64, 64) failed in worker 15 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=15 failed too many times, restarting this worker...
Block fault tolerance test/50 with read ROI [310:394, 246:330] (84, 84) and write ROI [320:384, 256:320] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/71 with read ROI [310:394, 374:458] (84, 84) and write ROI [320:384, 384:448] (64, 64) failed in worker 17 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/34 with read ROI [374:458, 54:138] (84, 84) and write ROI [384:448, 64:128] (64, 64) failed in worker 18 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/51 with read ROI [374:458, 182:266] (84, 84) and write ROI [384:448, 192:256] (64, 64) failed in worker 16 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=37805:task_id=fault tolerance test:worker_id=16 failed too many times, restarting this worker...
Block fault tolerance test/35 with read ROI [438:522, -10:74] (84, 84) and write ROI [448:512, 0:64] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/43 with read ROI [438:522, 54:138] (84, 84) and write ROI [448:512, 64:128] (64, 64) failed in worker 19 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/62 with read ROI [438:522, 182:266] (84, 84) and write ROI [448:512, 192:256] (64, 64) failed in worker 18 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/0 with read ROI [-10:74, -10:74] (84, 84) and write ROI [0:64, 0:64] (64, 64) failed in worker 17 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/15 with read ROI [-10:74, 310:394] (84, 84) and write ROI [0:64, 320:384] (64, 64) failed in worker 19 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/17 with read ROI [118:202, 182:266] (84, 84) and write ROI [128:192, 192:256] (64, 64) failed in worker 20 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/58 with read ROI [182:266, 438:522] (84, 84) and write ROI [192:256, 448:512] (64, 64) failed in worker 21 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/19 with read ROI [246:330, 54:138] (84, 84) and write ROI [256:320, 64:128] (64, 64) failed in worker 18 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/59 with read ROI [246:330, 374:458] (84, 84) and write ROI [256:320, 384:448] (64, 64) failed in worker 19 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/41 with read ROI [310:394, 182:266] (84, 84) and write ROI [320:384, 192:256] (64, 64) failed in worker 17 with ValueError(&#39;Simulating random failure&#39;)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task fault tolerance test:

    num blocks : 64
    completed ✔: 57 (skipped 0)
    failed    ✗: 7
    orphaned  ∅: 0

    Failed Blocks:

      block 0 in worker 7 with exception ValueError(&#39;Simulating random failure&#39;)
      block 15 in worker 7 with exception ValueError(&#39;Simulating random failure&#39;)
      block 21 in worker 8 with exception ValueError(&#39;Simulating random failure&#39;)
      block 28 in worker 9 with exception ValueError(&#39;Simulating random failure&#39;)
      block 4 in worker 7 with exception ValueError(&#39;Simulating random failure&#39;)
      block 7 in worker 11 with exception ValueError(&#39;Simulating random failure&#39;)
      block 22 in worker 7 with exception ValueError(&#39;Simulating random failure&#39;)
      block 12 in worker 9 with exception ValueError(&#39;Simulating random failure&#39;)
      block 17 in worker 11 with exception ValueError(&#39;Simulating random failure&#39;)
      block 23 in worker 10 with exception ValueError(&#39;Simulating random failure&#39;)
      block 30 in worker 9 with exception ValueError(&#39;Simulating random failure&#39;)
      block 9 in worker 10 with exception ValueError(&#39;Simulating random failure&#39;)
      block 31 in worker 10 with exception ValueError(&#39;Simulating random failure&#39;)
      block 58 in worker 12 with exception ValueError(&#39;Simulating random failure&#39;)
      block 19 in worker 10 with exception ValueError(&#39;Simulating random failure&#39;)
      block 32 in worker 11 with exception ValueError(&#39;Simulating random failure&#39;)
      block 40 in worker 12 with exception ValueError(&#39;Simulating random failure&#39;)
      block 49 in worker 9 with exception ValueError(&#39;Simulating random failure&#39;)
      block 70 in worker 8 with exception ValueError(&#39;Simulating random failure&#39;)
      block 41 in worker 12 with exception ValueError(&#39;Simulating random failure&#39;)
      block 50 in worker 11 with exception ValueError(&#39;Simulating random failure&#39;)
      block 27 in worker 14 with exception ValueError(&#39;Simulating random failure&#39;)
      block 34 in worker 12 with exception ValueError(&#39;Simulating random failure&#39;)
      block 51 in worker 14 with exception ValueError(&#39;Simulating random failure&#39;)
      block 35 in worker 13 with exception ValueError(&#39;Simulating random failure&#39;)
      block 43 in worker 8 with exception ValueError(&#39;Simulating random failure&#39;)
      block 62 in worker 14 with exception ValueError(&#39;Simulating random failure&#39;)
      block 73 in worker 13 with exception ValueError(&#39;Simulating random failure&#39;)
      block 0 in worker 16 with exception ValueError(&#39;Simulating random failure&#39;)
      block 15 in worker 13 with exception ValueError(&#39;Simulating random failure&#39;)
      block 28 in worker 15 with exception ValueError(&#39;Simulating random failure&#39;)
      block 5 in worker 15 with exception ValueError(&#39;Simulating random failure&#39;)
      block 17 in worker 16 with exception ValueError(&#39;Simulating random failure&#39;)
      block 9 in worker 14 with exception ValueError(&#39;Simulating random failure&#39;)
      block 19 in worker 16 with exception ValueError(&#39;Simulating random failure&#39;)
      block 25 in worker 13 with exception ValueError(&#39;Simulating random failure&#39;)
      block 32 in worker 15 with exception ValueError(&#39;Simulating random failure&#39;)
      block 59 in worker 8 with exception ValueError(&#39;Simulating random failure&#39;)
      block 41 in worker 15 with exception ValueError(&#39;Simulating random failure&#39;)
      block 71 in worker 17 with exception ValueError(&#39;Simulating random failure&#39;)
      block 34 in worker 18 with exception ValueError(&#39;Simulating random failure&#39;)
      block 51 in worker 16 with exception ValueError(&#39;Simulating random failure&#39;)
      block 43 in worker 19 with exception ValueError(&#39;Simulating random failure&#39;)
      block 62 in worker 18 with exception ValueError(&#39;Simulating random failure&#39;)
      block 0 in worker 17 with exception ValueError(&#39;Simulating random failure&#39;)
      block 15 in worker 19 with exception ValueError(&#39;Simulating random failure&#39;)
      block 17 in worker 20 with exception ValueError(&#39;Simulating random failure&#39;)
      block 58 in worker 21 with exception ValueError(&#39;Simulating random failure&#39;)
      block 19 in worker 18 with exception ValueError(&#39;Simulating random failure&#39;)
      block 59 in worker 19 with exception ValueError(&#39;Simulating random failure&#39;)
      block 41 in worker 17 with exception ValueError(&#39;Simulating random failure&#39;)

    See worker logs for details:

      daisy_logs/fault tolerance test/worker_7.err / .out
      daisy_logs/fault tolerance test/worker_7.err / .out
      daisy_logs/fault tolerance test/worker_8.err / .out
      daisy_logs/fault tolerance test/worker_9.err / .out
      daisy_logs/fault tolerance test/worker_7.err / .out
      daisy_logs/fault tolerance test/worker_11.err / .out
      daisy_logs/fault tolerance test/worker_7.err / .out
      daisy_logs/fault tolerance test/worker_9.err / .out
      daisy_logs/fault tolerance test/worker_11.err / .out
      daisy_logs/fault tolerance test/worker_10.err / .out
      ...
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;fault_tolerance&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff2ad1b4a0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_59_1.png" src="_images/tutorial_59_1.png" />
</div>
</div>
<p>Debugging multi-process code is inherently difficult, but daisy tries to provide as much information as possible. First, you see the progress bar, which also reports the number of blocks at each state, including failed blocks. Any worker error messages are also logged to the scheduler log, although not the full traceback. Upon completion, daisy provides an error summary, which informs you of the final status of all the blocks, and points you to the full output and error logs for each worker,
which can be found in <code class="docutils literal notranslate"><span class="pre">daisy_logs/&lt;task_name&gt;</span></code>. The worker error log will contain the full traceback for debugging the exact source of an error.</p>
<p>You may have noticed that while we coded the task to fail 50% of the time, much more than 50% of the blocks succeeded. This is because daisy by default retries each block 3 times (on different workers) before marking it as failed, to deal gracefully with random error. We will re-run this example, but set max_retries=0 to see the effect of this parameter.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># delete and re-create the dataset, so that we start from zeros again</span>
<span class="n">delete_ds</span><span class="p">(</span><span class="s2">&quot;fault_tolerance&quot;</span><span class="p">)</span>
<span class="n">prepare_smoothing_ds</span><span class="p">(</span><span class="s2">&quot;fault_tolerance&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
            <span class="s2">&quot;fault tolerance test&quot;</span><span class="p">,</span>
            <span class="n">process_function</span><span class="o">=</span><span class="n">smooth_in_block_with_failure</span><span class="p">,</span>
            <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
            <span class="n">read_roi</span><span class="o">=</span><span class="n">read_roi</span><span class="p">,</span>
            <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
            <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "6f4261601a114f9eba90f12b9ccc2d32", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Block fault tolerance test/6 with read ROI [-10:74, 182:266] (84, 84) and write ROI [0:64, 192:256] (64, 64) failed in worker 25 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/28 with read ROI [-10:74, 438:522] (84, 84) and write ROI [0:64, 448:512] (64, 64) failed in worker 25 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/16 with read ROI [54:138, 246:330] (84, 84) and write ROI [64:128, 256:320] (64, 64) failed in worker 23 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/29 with read ROI [54:138, 374:458] (84, 84) and write ROI [64:128, 384:448] (64, 64) failed in worker 26 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/5 with read ROI [118:202, -10:74] (84, 84) and write ROI [128:192, 0:64] (64, 64) failed in worker 22 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/12 with read ROI [118:202, 118:202] (84, 84) and write ROI [128:192, 128:192] (64, 64) failed in worker 24 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/23 with read ROI [118:202, 246:330] (84, 84) and write ROI [128:192, 256:320] (64, 64) failed in worker 22 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/18 with read ROI [182:266, 118:202] (84, 84) and write ROI [192:256, 128:192] (64, 64) failed in worker 23 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/24 with read ROI [182:266, 182:266] (84, 84) and write ROI [192:256, 192:256] (64, 64) failed in worker 24 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/31 with read ROI [182:266, 246:330] (84, 84) and write ROI [192:256, 256:320] (64, 64) failed in worker 25 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/39 with read ROI [182:266, 310:394] (84, 84) and write ROI [192:256, 320:384] (64, 64) failed in worker 26 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/25 with read ROI [246:330, 118:202] (84, 84) and write ROI [256:320, 128:192] (64, 64) failed in worker 26 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/40 with read ROI [246:330, 246:330] (84, 84) and write ROI [256:320, 256:320] (64, 64) failed in worker 23 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/49 with read ROI [246:330, 310:394] (84, 84) and write ROI [256:320, 320:384] (64, 64) failed in worker 24 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/20 with read ROI [310:394, -10:74] (84, 84) and write ROI [320:384, 0:64] (64, 64) failed in worker 23 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=34689:task_id=fault tolerance test:worker_id=23 failed too many times, restarting this worker...
Block fault tolerance test/41 with read ROI [310:394, 182:266] (84, 84) and write ROI [320:384, 192:256] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/26 with read ROI [310:394, 54:138] (84, 84) and write ROI [320:384, 64:128] (64, 64) failed in worker 22 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/60 with read ROI [310:394, 310:394] (84, 84) and write ROI [320:384, 320:384] (64, 64) failed in worker 26 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=34689:task_id=fault tolerance test:worker_id=26 failed too many times, restarting this worker...
Block fault tolerance test/71 with read ROI [310:394, 374:458] (84, 84) and write ROI [320:384, 384:448] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/51 with read ROI [374:458, 182:266] (84, 84) and write ROI [384:448, 192:256] (64, 64) failed in worker 27 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/61 with read ROI [374:458, 246:330] (84, 84) and write ROI [384:448, 256:320] (64, 64) failed in worker 24 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=34689:task_id=fault tolerance test:worker_id=24 failed too many times, restarting this worker...
Block fault tolerance test/84 with read ROI [374:458, 374:458] (84, 84) and write ROI [384:448, 384:448] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/43 with read ROI [438:522, 54:138] (84, 84) and write ROI [448:512, 64:128] (64, 64) failed in worker 22 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=34689:task_id=fault tolerance test:worker_id=22 failed too many times, restarting this worker...
Block fault tolerance test/52 with read ROI [438:522, 118:202] (84, 84) and write ROI [448:512, 128:192] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/62 with read ROI [438:522, 182:266] (84, 84) and write ROI [448:512, 192:256] (64, 64) failed in worker 25 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=34689:task_id=fault tolerance test:worker_id=25 failed too many times, restarting this worker...
Block fault tolerance test/73 with read ROI [438:522, 246:330] (84, 84) and write ROI [448:512, 256:320] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/85 with read ROI [438:522, 310:394] (84, 84) and write ROI [448:512, 320:384] (64, 64) failed in worker 28 with ValueError(&#39;Simulating random failure&#39;)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task fault tolerance test:

    num blocks : 64
    completed ✔: 37 (skipped 0)
    failed    ✗: 27
    orphaned  ∅: 0

    Failed Blocks:

      block 6 in worker 25 with exception ValueError(&#39;Simulating random failure&#39;)
      block 28 in worker 25 with exception ValueError(&#39;Simulating random failure&#39;)
      block 16 in worker 23 with exception ValueError(&#39;Simulating random failure&#39;)
      block 29 in worker 26 with exception ValueError(&#39;Simulating random failure&#39;)
      block 5 in worker 22 with exception ValueError(&#39;Simulating random failure&#39;)
      block 12 in worker 24 with exception ValueError(&#39;Simulating random failure&#39;)
      block 23 in worker 22 with exception ValueError(&#39;Simulating random failure&#39;)
      block 18 in worker 23 with exception ValueError(&#39;Simulating random failure&#39;)
      block 24 in worker 24 with exception ValueError(&#39;Simulating random failure&#39;)
      block 31 in worker 25 with exception ValueError(&#39;Simulating random failure&#39;)
      block 39 in worker 26 with exception ValueError(&#39;Simulating random failure&#39;)
      block 25 in worker 26 with exception ValueError(&#39;Simulating random failure&#39;)
      block 40 in worker 23 with exception ValueError(&#39;Simulating random failure&#39;)
      block 49 in worker 24 with exception ValueError(&#39;Simulating random failure&#39;)
      block 20 in worker 23 with exception ValueError(&#39;Simulating random failure&#39;)
      block 26 in worker 22 with exception ValueError(&#39;Simulating random failure&#39;)
      block 60 in worker 26 with exception ValueError(&#39;Simulating random failure&#39;)
      block 51 in worker 27 with exception ValueError(&#39;Simulating random failure&#39;)
      block 61 in worker 24 with exception ValueError(&#39;Simulating random failure&#39;)
      block 43 in worker 22 with exception ValueError(&#39;Simulating random failure&#39;)
      block 62 in worker 25 with exception ValueError(&#39;Simulating random failure&#39;)
      block 85 in worker 28 with exception ValueError(&#39;Simulating random failure&#39;)

    See worker logs for details:

      daisy_logs/fault tolerance test/worker_25.err / .out
      daisy_logs/fault tolerance test/worker_25.err / .out
      daisy_logs/fault tolerance test/worker_23.err / .out
      daisy_logs/fault tolerance test/worker_26.err / .out
      daisy_logs/fault tolerance test/worker_22.err / .out
      daisy_logs/fault tolerance test/worker_24.err / .out
      daisy_logs/fault tolerance test/worker_22.err / .out
      daisy_logs/fault tolerance test/worker_23.err / .out
      daisy_logs/fault tolerance test/worker_24.err / .out
      daisy_logs/fault tolerance test/worker_25.err / .out
      ...
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;fault_tolerance&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff55752f60&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_64_1.png" src="_images/tutorial_64_1.png" />
</div>
</div>
<p>Now we should see a success rate closer to what we would expect. You might notice in the logs a message like <code class="docutils literal notranslate"><span class="pre">Worker</span> <span class="pre">hostname=...:port=..:task_id=fault</span> <span class="pre">tolerance</span> <span class="pre">test:worker_id=...</span> <span class="pre">failed</span> <span class="pre">too</span> <span class="pre">many</span> <span class="pre">times,</span> <span class="pre">restarting</span> <span class="pre">this</span> <span class="pre">worker...</span></code>, which shows another way that daisy is robust to pseudo-random errors. If a specific worker fails multiple times, daisy will assume something might have gone wrong with that worker (e.g. GPU memory taken by another process that the cluster scheduler was not aware
of). The scheduler will shut down and restart the worker, and retry the blocks that failed on that worker. So daisy is very robust to random error.</p>
<p>But what about non-random error, like stopping after 8 hours? If you don’t want to re-process all the already processed blocks from a prior run, you can write a function that takes a block and checks if it is complete, and pass it to the scheduler. The scheduler will run this check function on each block and skip the block if the check function returns true.</p>
<p>Here is an example check function for our smoothing task, that checks if there are any non-zero values in the output array</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">check_complete</span><span class="p">(</span><span class="n">output_group</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">output_group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">output_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
<p>If we re-run the task, but with the check function provided, you should see in the execution summary that all the blocks that finished before are skipped. You can continue re-running until you reach 100% completion, without ever re-processing those same blocks</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
            <span class="s2">&quot;fault tolerance test&quot;</span><span class="p">,</span>
            <span class="n">process_function</span><span class="o">=</span><span class="n">smooth_in_block_with_failure</span><span class="p">,</span>
            <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
            <span class="n">read_roi</span><span class="o">=</span><span class="n">read_roi</span><span class="p">,</span>
            <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
            <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">check_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">check_complete</span><span class="p">,</span> <span class="s2">&quot;fault_tolerance&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "a0158c48c11745b3b38e22ae9a43534a", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Block fault tolerance test/6 with read ROI [-10:74, 182:266] (84, 84) and write ROI [0:64, 192:256] (64, 64) failed in worker 32 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/23 with read ROI [118:202, 246:330] (84, 84) and write ROI [128:192, 256:320] (64, 64) failed in worker 34 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/18 with read ROI [182:266, 118:202] (84, 84) and write ROI [192:256, 128:192] (64, 64) failed in worker 35 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/24 with read ROI [182:266, 182:266] (84, 84) and write ROI [192:256, 192:256] (64, 64) failed in worker 36 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/39 with read ROI [182:266, 310:394] (84, 84) and write ROI [192:256, 320:384] (64, 64) failed in worker 34 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/25 with read ROI [246:330, 118:202] (84, 84) and write ROI [256:320, 128:192] (64, 64) failed in worker 32 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/40 with read ROI [246:330, 246:330] (84, 84) and write ROI [256:320, 256:320] (64, 64) failed in worker 35 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/20 with read ROI [310:394, -10:74] (84, 84) and write ROI [320:384, 0:64] (64, 64) failed in worker 34 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/26 with read ROI [310:394, 54:138] (84, 84) and write ROI [320:384, 64:128] (64, 64) failed in worker 33 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/41 with read ROI [310:394, 182:266] (84, 84) and write ROI [320:384, 192:256] (64, 64) failed in worker 32 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/60 with read ROI [310:394, 310:394] (84, 84) and write ROI [320:384, 320:384] (64, 64) failed in worker 35 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/51 with read ROI [374:458, 182:266] (84, 84) and write ROI [384:448, 192:256] (64, 64) failed in worker 34 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=33831:task_id=fault tolerance test:worker_id=34 failed too many times, restarting this worker...
Block fault tolerance test/61 with read ROI [374:458, 246:330] (84, 84) and write ROI [384:448, 256:320] (64, 64) failed in worker 33 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/84 with read ROI [374:458, 374:458] (84, 84) and write ROI [384:448, 384:448] (64, 64) failed in worker 32 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=33831:task_id=fault tolerance test:worker_id=32 failed too many times, restarting this worker...
Block fault tolerance test/52 with read ROI [438:522, 118:202] (84, 84) and write ROI [448:512, 128:192] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/85 with read ROI [438:522, 310:394] (84, 84) and write ROI [448:512, 320:384] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/62 with read ROI [438:522, 182:266] (84, 84) and write ROI [448:512, 192:256] (64, 64) failed in worker 36 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/6 with read ROI [-10:74, 182:266] (84, 84) and write ROI [0:64, 192:256] (64, 64) failed in worker 35 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=33831:task_id=fault tolerance test:worker_id=35 failed too many times, restarting this worker...
Block fault tolerance test/24 with read ROI [182:266, 182:266] (84, 84) and write ROI [192:256, 192:256] (64, 64) was lost, returning it to scheduler
Block fault tolerance test/18 with read ROI [182:266, 118:202] (84, 84) and write ROI [192:256, 128:192] (64, 64) failed in worker 33 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/39 with read ROI [182:266, 310:394] (84, 84) and write ROI [192:256, 320:384] (64, 64) failed in worker 37 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/40 with read ROI [246:330, 246:330] (84, 84) and write ROI [256:320, 256:320] (64, 64) failed in worker 36 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/20 with read ROI [310:394, -10:74] (84, 84) and write ROI [320:384, 0:64] (64, 64) failed in worker 38 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/26 with read ROI [310:394, 54:138] (84, 84) and write ROI [320:384, 64:128] (64, 64) failed in worker 37 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/84 with read ROI [374:458, 374:458] (84, 84) and write ROI [384:448, 384:448] (64, 64) failed in worker 37 with ValueError(&#39;Simulating random failure&#39;)
Block fault tolerance test/52 with read ROI [438:522, 118:202] (84, 84) and write ROI [448:512, 128:192] (64, 64) failed in worker 36 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=33831:task_id=fault tolerance test:worker_id=36 failed too many times, restarting this worker...
Block fault tolerance test/85 with read ROI [438:522, 310:394] (84, 84) and write ROI [448:512, 320:384] (64, 64) failed in worker 33 with ValueError(&#39;Simulating random failure&#39;)
Worker logdir=daisy_logs:hostname=10.1.0.166:port=33831:task_id=fault tolerance test:worker_id=33 failed too many times, restarting this worker...
Block fault tolerance test/62 with read ROI [438:522, 182:266] (84, 84) and write ROI [448:512, 192:256] (64, 64) failed in worker 38 with ValueError(&#39;Simulating random failure&#39;)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task fault tolerance test:

    num blocks : 64
    completed ✔: 53 (skipped 37)
    failed    ✗: 11
    orphaned  ∅: 0

    Failed Blocks:

      block 6 in worker 32 with exception ValueError(&#39;Simulating random failure&#39;)
      block 23 in worker 34 with exception ValueError(&#39;Simulating random failure&#39;)
      block 18 in worker 35 with exception ValueError(&#39;Simulating random failure&#39;)
      block 24 in worker 36 with exception ValueError(&#39;Simulating random failure&#39;)
      block 39 in worker 34 with exception ValueError(&#39;Simulating random failure&#39;)
      block 25 in worker 32 with exception ValueError(&#39;Simulating random failure&#39;)
      block 40 in worker 35 with exception ValueError(&#39;Simulating random failure&#39;)
      block 20 in worker 34 with exception ValueError(&#39;Simulating random failure&#39;)
      block 26 in worker 33 with exception ValueError(&#39;Simulating random failure&#39;)
      block 41 in worker 32 with exception ValueError(&#39;Simulating random failure&#39;)
      block 60 in worker 35 with exception ValueError(&#39;Simulating random failure&#39;)
      block 51 in worker 34 with exception ValueError(&#39;Simulating random failure&#39;)
      block 61 in worker 33 with exception ValueError(&#39;Simulating random failure&#39;)
      block 84 in worker 32 with exception ValueError(&#39;Simulating random failure&#39;)
      block 62 in worker 36 with exception ValueError(&#39;Simulating random failure&#39;)
      block 6 in worker 35 with exception ValueError(&#39;Simulating random failure&#39;)
      block 18 in worker 33 with exception ValueError(&#39;Simulating random failure&#39;)
      block 39 in worker 37 with exception ValueError(&#39;Simulating random failure&#39;)
      block 40 in worker 36 with exception ValueError(&#39;Simulating random failure&#39;)
      block 20 in worker 38 with exception ValueError(&#39;Simulating random failure&#39;)
      block 26 in worker 37 with exception ValueError(&#39;Simulating random failure&#39;)
      block 84 in worker 37 with exception ValueError(&#39;Simulating random failure&#39;)
      block 52 in worker 36 with exception ValueError(&#39;Simulating random failure&#39;)
      block 85 in worker 33 with exception ValueError(&#39;Simulating random failure&#39;)
      block 62 in worker 38 with exception ValueError(&#39;Simulating random failure&#39;)

    See worker logs for details:

      daisy_logs/fault tolerance test/worker_32.err / .out
      daisy_logs/fault tolerance test/worker_34.err / .out
      daisy_logs/fault tolerance test/worker_35.err / .out
      daisy_logs/fault tolerance test/worker_36.err / .out
      daisy_logs/fault tolerance test/worker_34.err / .out
      daisy_logs/fault tolerance test/worker_32.err / .out
      daisy_logs/fault tolerance test/worker_35.err / .out
      daisy_logs/fault tolerance test/worker_34.err / .out
      daisy_logs/fault tolerance test/worker_33.err / .out
      daisy_logs/fault tolerance test/worker_32.err / .out
      ...
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;fault_tolerance&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff5528f290&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_69_1.png" src="_images/tutorial_69_1.png" />
</div>
</div>
<p>Unfortunately, this is a pretty inefficient pre-check function, because you have to actually read the output data to see if the block is completed. Since this will be run on the scheduler on every block before it is passed to a worker, it might not even be faster than just re-processing the blocks (which is at least distributed).</p>
<p>If you plan to have extremely long running jobs that might get killed in the middle, we recommend including a step in your process function after you write out the result of a block, in which you write out the block id to a database or a file. Then, the pre-check function can just check if the block id is in the file system or database, which is much faster than reading the actual data.</p>
<p>###Task chaining</p>
<p>Frequently, image processing pipelines involve multiple tasks, where some tasks depend on the output of other tasks. For example, we have a function to segment out instances of blue objects in an image, and we want to apply it after smoothing. We can define two tasks and run them sequentially in the scheduler. Daisy will even begin the second task as soon as a single block can be run, rather than waiting for the first task to fully complete before starting the second task.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install opencv-python
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/runner/work/daisy/daisy/.venv/bin/python: No module named pip
Note: you may need to restart the kernel to use updated packages.
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># here is our function to segment blue objects</span>
<span class="c1"># it is just thresholding in HSV space, so unlike smoothing, the neighboring pixels do not affect the outcome</span>
<span class="c1"># There is probably a nicer way to get the image into hsv space, but this gets the job done!</span>
<span class="k">def</span><span class="w"> </span><span class="nf">segment_blue_objects</span><span class="p">(</span><span class="n">input_group</span><span class="p">,</span> <span class="n">output_group</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">skimage</span>

    <span class="c1"># load the data as usual</span>
    <span class="n">input_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">input_group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;r&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">input_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">)</span>

    <span class="c1"># massage the data into open cv hsv format :/</span>
    <span class="n">back_to_skimage</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
    <span class="n">cv2_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span>
        <span class="n">skimage</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">img_as_ubyte</span><span class="p">(</span><span class="n">back_to_skimage</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span>
    <span class="p">)</span>
    <span class="n">hsv_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">cv2_image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>

    <span class="c1"># Define the color range for detection</span>
    <span class="n">lower_blue</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">upper_blue</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span>

    <span class="c1"># Threshold the image to get only blue colors</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv_image</span><span class="p">,</span> <span class="n">lower_blue</span><span class="p">,</span> <span class="n">upper_blue</span><span class="p">)</span>  <span class="c1"># this returns 0 and 255</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">//</span> <span class="mi">255</span>  <span class="c1"># turn into 0/1 labels</span>

    <span class="c1"># give each connected component its own instance segmentation label</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">skimage</span><span class="o">.</span><span class="n">measure</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>

    <span class="c1"># get a unique ID for each element in the whole volume (avoid repeats between blocks)</span>
    <span class="n">max_number_obj</span> <span class="o">=</span> <span class="p">(</span>
        <span class="mi">128</span> <span class="o">*</span> <span class="mi">128</span>
    <span class="p">)</span>  <span class="c1"># This number is an upper bound on the maximum number of objects in a block</span>
    <span class="n">block_id_mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">*</span> <span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">block_id</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">max_number_obj</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span> <span class="o">+</span> <span class="n">block_id_mask</span>

    <span class="c1"># save the output</span>
    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">output_group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">output_ds</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>
</pre></div>
</div>
</div>
<p>Previously, we always defined our <code class="docutils literal notranslate"><span class="pre">daisy.Task</span></code> inside the call to <code class="docutils literal notranslate"><span class="pre">daisy.run_blockwise</span></code>. Now, we need to save our smoothing task in a variable so we can reference it as a dependency our segmentation task.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># as always, prepare the output dataset</span>
<span class="n">delete_ds</span><span class="p">(</span><span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">)</span>
<span class="n">prepare_smoothing_ds</span><span class="p">(</span><span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">)</span>

<span class="c1"># same smoothing task as usual, with unqiue output dataset</span>
<span class="n">smoothing_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;smooth_for_seg&quot;</span><span class="p">,</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">smooth_in_block</span><span class="p">,</span> <span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">),</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">read_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">check_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">check_complete</span><span class="p">,</span> <span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next, we make our segmentatation task. Each task can have different hyperaparameters, including block sizes and total rois. For the segmentation, we will double the block size and not add context, since unlike smoothing, thresholding does not depend on neighboring pixels.</p>
<p>Since our instance segmentation output has different output data type, no channels, and a different total output roi, we need to change our arguments to <code class="docutils literal notranslate"><span class="pre">prepare_ds</span></code> for this task.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># you can have different block sizes in different tasks</span>
<span class="n">seg_block_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>

<span class="n">delete_ds</span><span class="p">(</span><span class="s2">&quot;blue_objects&quot;</span><span class="p">)</span>
<span class="n">prepare_ds</span><span class="p">(</span>
    <span class="s2">&quot;sample_data.zarr/blue_objects&quot;</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
    <span class="n">offset</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span>
    <span class="n">voxel_size</span><span class="o">=</span><span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
    <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">,</span>  <span class="c1"># This is different! Our labels will be uint32</span>
    <span class="n">write_size</span><span class="o">=</span><span class="n">seg_block_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>  <span class="c1"># use the new block roi to determine the chunk size</span>
<span class="p">)</span>

<span class="n">seg_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;segmentation&quot;</span><span class="p">,</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">segment_blue_objects</span><span class="p">,</span> <span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">,</span> <span class="s2">&quot;blue_objects&quot;</span><span class="p">),</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="p">,</span>  <span class="c1"># Note: This task does not have context (yet...?)</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">seg_block_roi</span><span class="p">,</span>  <span class="c1"># again, no context</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">seg_block_roi</span><span class="p">,</span>  <span class="c1"># so read and write rois are the same</span>
    <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">upstream_tasks</span><span class="o">=</span><span class="p">[</span>
        <span class="n">smoothing_task</span>
    <span class="p">],</span>  <span class="c1"># Here is where we define that this task depends on the output of the smoothing task</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/work/daisy/daisy/.venv/lib/python3.12/site-packages/zarr/creation.py:614: UserWarning: ignoring keyword argument &#39;write_size&#39;
  compressor, fill_value = _kwargs_compat(compressor, fill_value, kwargs)
</pre></div></div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">upstream_tasks</span></code> argument - this is how you tell the scheduler that this task depends on the output of the smoothing task. Then, we can pass both tasks into <code class="docutils literal notranslate"><span class="pre">run_blockwise</span></code>. You should see that the process bar for the segmentation task starts before the smoothing progress bar completes.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">smoothing_task</span><span class="p">,</span> <span class="n">seg_task</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "1efa0c6bd6174ceab80654fde69133a9", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "57aba6a9f32344a59bf658ddc9174812", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task smooth_for_seg:

    num blocks : 64
    completed ✔: 64 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully

  Task segmentation:

    num blocks : 16
    completed ✔: 16 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a colormap to display the labels as unique colors</span>
<span class="c1"># This doesn&#39;t actually guarantee uniqueness, since it wraps the list at some point</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mcolors</span>

<span class="n">colors_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mcolors</span><span class="o">.</span><span class="n">XKCD_COLORS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="c1"># colors_list.remove(&quot;black&quot;)</span>
<span class="n">colormap</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">ListedColormap</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">colors_list</span> <span class="o">*</span> <span class="mi">101</span><span class="p">)</span>

<span class="n">figure</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">blue_objs</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;blue_objects&quot;</span><span class="p">][:]</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">blue_objs</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff5532a330&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_81_1.png" src="_images/tutorial_81_1.png" />
</div>
</div>
<p>Now we know how to chain tasks together, but we’ve created another issue. If objects crossed block boundaries, they were assigned different IDs. We will address this problem in the next section.</p>
<p>###Process functions that need to read their neighbor’s output (and the “read_write_conflict” flag)</p>
<p>There is a class of problem where it is useful for a block to see the output of its neighboring blocks. Usually, this need comes up when the task performs detection and linking in the same step. To detect an object in a block, it is useful to know if a neighbor has already detected an object that the object in the current block should link to. This is especially useful if there is some sort of continuity constraint, as in tracking objects over time. Even for tasks without a continuity
constraint, like agglomeration of fragments for instance segmentation, performing the detection and linking at the same time can save you an extra pass over the dataset, which matters when the datasets are large.</p>
<p>The example in this tutorial is only to illustrate how daisy implements the ability to depend on neighboring blocks outputs, by showing how we can relabel the segmentation IDs to be consistent across blocks during the detection step. Let’s visualize an example block as though it were not completed, but its neighbors are done, and the read_roi is expanded by a certain amount of context.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">context</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># It could be as low as 1, but we use 10 for ease of visualization</span>
<span class="n">seg_block_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>
<span class="n">seg_read_roi</span> <span class="o">=</span> <span class="n">seg_block_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
<span class="n">seg_write_roi</span> <span class="o">=</span> <span class="n">seg_block_roi</span>
<span class="n">seg_total_read_roi</span> <span class="o">=</span> <span class="n">total_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="n">seg_block</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">seg_total_read_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">seg_read_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">seg_write_roi</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># simulate this block not being completed yet</span>
<span class="n">blue_objs</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;blue_objects&quot;</span><span class="p">][:]</span>
<span class="n">blue_objs</span><span class="p">[</span><span class="mi">128</span><span class="p">:</span><span class="mi">356</span><span class="p">,</span> <span class="mi">128</span><span class="p">:</span><span class="mi">256</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>


<span class="n">figure</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">blue_objs</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">)</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">seg_block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">)</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">seg_block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">seg_block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">)</span>
<span class="n">display_roi</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">seg_block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_85_0.png" src="_images/tutorial_85_0.png" />
</div>
</div>
<p>Here the purple is the read_roi of our current block, and the white is the write_roi. As before, the process function will read the input image in the read_roi and segment it. From the previous result visualization, we can see that the function will detect the top half of the crest and assign it the label id that is visualized as brown.</p>
<p>Before we write out the brown label to the write_roi of the output dataset, however, we can adapt the process function to <strong>also read in the existing results in the output dataset</strong> in the read_roi. The existing green label will then overlap with the brown label, and our process function can relabel the top half of the crest green based on this information, before writing to the write_roi.</p>
<p>This approach only works if the overlapping blocks are run sequentially (and if objects don’t span across non-adjacent blocks - for large objects, you cannot relabel without a second pass). If the neighbors are run in parallel, it is possible that the green label will not yet be there when our current block reads existing labels, but also that our brown label will not yet be there when the block containing the green object reads existing labels. If <code class="docutils literal notranslate"><span class="pre">read_write_conflicts</span></code> argument is set to
True in a task, the daisy scheduler will ensure that pairs of blocks with overlapping read/write rois will never be run at the same time, thus avoiding this race condition.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># here is the new and improved segmentation function that reads in neighboring output context</span>
<span class="k">def</span><span class="w"> </span><span class="nf">segment_blue_objects_with_context</span><span class="p">(</span><span class="n">input_group</span><span class="p">,</span> <span class="n">output_group</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence.arrays</span><span class="w"> </span><span class="kn">import</span> <span class="n">open_ds</span><span class="p">,</span> <span class="n">Array</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">skimage</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_overlapping_labels</span><span class="p">(</span><span class="n">array1</span><span class="p">,</span> <span class="n">array2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A function to get all pairs of labels that intsersect between two arrays&quot;&quot;&quot;</span>
        <span class="n">array1</span> <span class="o">=</span> <span class="n">array1</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">array2</span> <span class="o">=</span> <span class="n">array2</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># get indices where both are not zero (ignore background)</span>
        <span class="c1"># this speeds up computation significantly</span>
        <span class="n">non_zero_indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">array1</span><span class="p">,</span> <span class="n">array2</span><span class="p">)</span>
        <span class="n">flattened_stacked</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[</span><span class="n">array1</span><span class="p">[</span><span class="n">non_zero_indices</span><span class="p">],</span> <span class="n">array2</span><span class="p">[</span><span class="n">non_zero_indices</span><span class="p">]]</span>
        <span class="p">)</span>
        <span class="n">intersections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">flattened_stacked</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">intersections</span>  <span class="c1"># a &lt;number of pairs&gt; x 2 nparray</span>

    <span class="c1"># load the data as usual</span>
    <span class="n">input_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">input_group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;r&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">input_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span>
        <span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>  <span class="c1"># add the fill value because context</span>

    <span class="c1"># massage the data into open cv hsv format :/</span>
    <span class="n">back_to_skimage</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
    <span class="n">cv2_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span>
        <span class="n">skimage</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">img_as_ubyte</span><span class="p">(</span><span class="n">back_to_skimage</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span>
    <span class="p">)</span>
    <span class="n">hsv_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">cv2_image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>

    <span class="c1"># Define the color range for detection</span>
    <span class="n">lower_blue</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">upper_blue</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span>

    <span class="c1"># Threshold the image to get only blue colors</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv_image</span><span class="p">,</span> <span class="n">lower_blue</span><span class="p">,</span> <span class="n">upper_blue</span><span class="p">)</span>  <span class="c1"># this returns 0 and 255</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">//</span> <span class="mi">255</span>  <span class="c1"># turn into 0/1 labels</span>

    <span class="c1"># give each connected component its own instance segmentation label</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">skimage</span><span class="o">.</span><span class="n">measure</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>

    <span class="c1"># get a unique ID for each element in the whole volume (avoid repeats between blocks)</span>
    <span class="n">max_number_obj</span> <span class="o">=</span> <span class="p">(</span>
        <span class="mi">128</span> <span class="o">*</span> <span class="mi">128</span>
    <span class="p">)</span>  <span class="c1"># This number is an upper bound on the maximum number of objects in a block</span>
    <span class="n">block_id_mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">*</span> <span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">block_id</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">max_number_obj</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span> <span class="o">+</span> <span class="n">block_id_mask</span>

    <span class="c1"># load the existing labels in the output</span>
    <span class="n">output_ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sample_data.zarr/</span><span class="si">{</span><span class="n">output_group</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">existing_labels</span> <span class="o">=</span> <span class="n">output_ds</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># if there are existing labels, change the label to match</span>
    <span class="c1"># note: This only works if objects never span multiple rows/columns.</span>
    <span class="c1"># If you have long objects like neurons, you need to do true agglomeration</span>
    <span class="n">intersections</span> <span class="o">=</span> <span class="n">get_overlapping_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">existing_labels</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">intersections</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">label</span><span class="p">,</span> <span class="n">existing_label</span> <span class="o">=</span> <span class="n">intersections</span><span class="p">[:,</span> <span class="n">index</span><span class="p">]</span>
        <span class="c1"># Change the label to the one that was already in the neighbor</span>
        <span class="n">labels</span><span class="p">[</span><span class="n">labels</span> <span class="o">==</span> <span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">existing_label</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span>
        <span class="mf">0.5</span>
    <span class="p">)</span>  <span class="c1"># included to show that read_write_conflicts=False leads to race conditions</span>

    <span class="c1"># center crop and save the output dataset</span>
    <span class="n">output_array</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">voxel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">output_ds</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_array</span><span class="o">.</span><span class="n">to_ndarray</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seg_block_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>
<span class="n">seg_block_read_roi</span> <span class="o">=</span> <span class="n">seg_block_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="n">delete_ds</span><span class="p">(</span><span class="s2">&quot;blue_objects_with_context&quot;</span><span class="p">)</span>
<span class="n">prepare_ds</span><span class="p">(</span>
    <span class="s2">&quot;sample_data.zarr/blue_objects_with_context&quot;</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
    <span class="n">offset</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span>
    <span class="n">voxel_size</span><span class="o">=</span><span class="n">daisy</span><span class="o">.</span><span class="n">Coordinate</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
    <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">,</span>
    <span class="n">write_size</span><span class="o">=</span><span class="n">seg_block_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">seg_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;segmentation_with_context&quot;</span><span class="p">,</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">segment_blue_objects_with_context</span><span class="p">,</span>
        <span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;blue_objects_with_context&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_read_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">seg_block_read_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">seg_block_roi</span><span class="p">,</span>
    <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># this ensures neighboring blocks aren&#39;t run at the same time</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">upstream_tasks</span><span class="o">=</span><span class="p">[</span><span class="n">smoothing_task</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">seg_task</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/work/daisy/daisy/.venv/lib/python3.12/site-packages/zarr/creation.py:614: UserWarning: ignoring keyword argument &#39;write_size&#39;
  compressor, fill_value = _kwargs_compat(compressor, fill_value, kwargs)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "71cc5d38293a4e548ed6092e7345a83e", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task smooth_for_seg:

    num blocks : 64
    completed ✔: 64 (skipped 64)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully

  Task segmentation_with_context:

    num blocks : 16
    completed ✔: 16 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">figure</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;smoothed_for_seg&quot;</span><span class="p">][:]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;sample_data.zarr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)[</span><span class="s2">&quot;blue_objects_with_context&quot;</span><span class="p">][:],</span>
    <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
    <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
    <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.image.AxesImage at 0x7eff2ad10590&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorial_89_1.png" src="_images/tutorial_89_1.png" />
</div>
</div>
<p>All the labels are now consistent! If you re-run the previous cell with <code class="docutils literal notranslate"><span class="pre">read_write_conflict=False</span></code>, you should see an inconsistent result again due to the race conditions, even though the process function still reads the neighboring output.</p>
<p><strong>IMPORTANT PERFORMANCE NOTE:</strong> Be aware that <code class="docutils literal notranslate"><span class="pre">read_write_conflicts</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> by default and can lead to performance hits in cases where you don’t need it, so be sure to turn it off if you want every block to be run in parallel!</p>
</section>
</section>
<section id="Some-Minimal-Examples">
<h1>Some Minimal Examples<a class="headerlink" href="#Some-Minimal-Examples" title="Link to this heading"></a></h1>
<section id="Introduction-and-overview">
<h2>Introduction and overview<a class="headerlink" href="#Introduction-and-overview" title="Link to this heading"></a></h2>
<p>In this tutorial we will cover some basic Daisy <code class="docutils literal notranslate"><span class="pre">Task</span></code>s</p>
<p><strong>daisy.Task</strong>: All code you would like to distribute into blocks must be wrapped into a <code class="docutils literal notranslate"><span class="pre">Task</span></code> to be executed by daisy.</p>
</section>
<section id="Environment-setup">
<h2>Environment setup<a class="headerlink" href="#Environment-setup" title="Link to this heading"></a></h2>
<p>If you have not already done so, I highly recommend you create an environment first. You can do this with <code class="docutils literal notranslate"><span class="pre">uv</span></code> via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>init<span class="w"> </span>--python<span class="w"> </span><span class="m">3</span>.12
</pre></div>
</div>
<p>Activating the environment is as simple as <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">.venv/bin/activate</span></code></p>
<p>Then, you can:</p>
<ul class="simple">
<li><p>add daisy directly to your dependencies with: <code class="docutils literal notranslate"><span class="pre">bash</span>&#160;&#160;&#160;&#160; <span class="pre">uv</span> <span class="pre">add</span> <span class="pre">daisy</span></code></p></li>
<li><p>install daisy using pip by name or via GitHub: <code class="docutils literal notranslate"><span class="pre">bash</span>&#160;&#160;&#160;&#160; <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">daisy</span></code></p></li>
</ul>
<section id="Multiprocessing">
<h3>Multiprocessing<a class="headerlink" href="#Multiprocessing" title="Link to this heading"></a></h3>
<p>Here we set the start method to fork. We do this to simplify running this notebook in a jupyter notebook. The “spawn” start method is supported but limits the possible functions you can execute blockwise (i.e. no lambda functions)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">multiprocessing</span>

<span class="n">multiprocessing</span><span class="o">.</span><span class="n">set_start_method</span><span class="p">(</span><span class="s2">&quot;fork&quot;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Daisy-Tasks">
<h2>Daisy Tasks<a class="headerlink" href="#Daisy-Tasks" title="Link to this heading"></a></h2>
<section id="A-Simple-Task">
<h3>A Simple Task<a class="headerlink" href="#A-Simple-Task" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">daisy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">daisy</span><span class="w"> </span><span class="kn">import</span> <span class="n">Coordinate</span><span class="p">,</span> <span class="n">Roi</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="c1"># Create a super simple task</span>
<span class="n">dummy_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;Dummy&quot;</span><span class="p">,</span>  <span class="c1"># We give the task a name</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,)),</span>  <span class="c1"># a 1-D bounding box [0,100)</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>  <span class="c1"># We read in blocks of size [0,1)</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>  <span class="c1"># We write in blocks of size [0, 1)</span>
    <span class="n">process_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">block</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span>
        <span class="mf">0.05</span>
    <span class="p">),</span>  <span class="c1"># Our process function takes the block and simply waits</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># execute the task without any multiprocessing</span>
<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">dummy_task</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">dummy_task</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "0296c4ad84674b9ab40df006b038706c", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Dummy:

    num blocks : 100
    completed ✔: 100 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "4b7ec8adc7ef4c0e9204700a82576c6d", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Dummy:

    num blocks : 100
    completed ✔: 100 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>Since there are 100 blocks to process, and we always sleep for 0.05 seconds, it takes 5 seconds to run all the blocks without multiprocessing, but only 1 second with <code class="docutils literal notranslate"><span class="pre">multiprocessing=True</span></code>. When you run a task with <code class="docutils literal notranslate"><span class="pre">daisy</span></code>, you get a progress bar along with a summary of the execution after you have finished processing. Here no errors were thrown so we completed all 100 blocks.</p>
<p><code class="docutils literal notranslate"><span class="pre">daisy</span></code> also programatically returns a dictionary containing a summary of the execution for all given tasks so that you can decide how to procede based on whether any blocks failed.</p>
<p>Next lets look see what we can do to modify this task</p>
</section>
<section id="Failing-blocks">
<h3>Failing blocks<a class="headerlink" href="#Failing-blocks" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>


<span class="k">def</span><span class="w"> </span><span class="nf">random_fail</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.2</span><span class="p">:</span>
        <span class="n">block</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">BlockStatus</span><span class="o">.</span><span class="n">FAILED</span>
    <span class="k">return</span> <span class="n">block</span>


<span class="c1"># Create a super simple task</span>
<span class="n">failing_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;Failures&quot;</span><span class="p">,</span>  <span class="c1"># We give the task a name</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,)),</span>  <span class="c1"># a 1-D bounding box [0,100)</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>  <span class="c1"># We read in blocks of size [0,1)</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>  <span class="c1"># We write in blocks of size [0, 1)</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">random_fail</span><span class="p">,</span>  <span class="c1"># Our process function takes the block and simply waits</span>
    <span class="n">max_retries</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># We do not retry failed blocks to get expected failure counts</span>
<span class="p">)</span>

<span class="c1"># execute the task without any multiprocessing</span>
<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">failing_task</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "b67205e4750844fb936340bd58be764d", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Failures:

    num blocks : 100
    completed ✔: 83 (skipped 0)
    failed    ✗: 17
    orphaned  ∅: 0

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
defaultdict(daisy.task_state.TaskState,
            {&#39;Failures&#39;: Started: True
             Total Blocks: 100
             Ready: 0
             Processing: 0
             Pending: 0
             Completed: 83
             Skipped: 0
             Failed: 17
             Orphaned: 0})
</pre></div></div>
</div>
<p>In this case, we have a 20% chance of failing each block. As you see from the execution summary, about 20% of the blocks failed. If your blocks are failing, you may want to rerun the task and only process failed blocks. This is where we use the <code class="docutils literal notranslate"><span class="pre">check_function</span></code> argument in the <code class="docutils literal notranslate"><span class="pre">daisy.Task</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">random_fail</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.2</span><span class="p">:</span>
            <span class="n">block</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">BlockStatus</span><span class="o">.</span><span class="n">FAILED</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">block</span><span class="o">.</span><span class="n">block_id</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">block</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_block</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Block</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">block</span><span class="o">.</span><span class="n">block_id</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># Create a super simple task</span>
        <span class="n">check_block_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
            <span class="s2">&quot;Checking-Blocks&quot;</span><span class="p">,</span>  <span class="c1"># We give the task a name</span>
            <span class="n">total_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,)),</span>  <span class="c1"># a 1-D bounding box [0,100)</span>
            <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>  <span class="c1"># We read in blocks of size [0,1)</span>
            <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>  <span class="c1"># We write in blocks of size [0, 1)</span>
            <span class="n">process_function</span><span class="o">=</span><span class="n">random_fail</span><span class="p">,</span>  <span class="c1"># Our process function takes the block and simply waits</span>
            <span class="n">check_function</span><span class="o">=</span><span class="n">check_block</span><span class="p">,</span>  <span class="c1"># Check if a block has been completed or not</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># execute the task without any multiprocessing</span>
        <span class="n">task_state</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">check_block_task</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">task_state</span><span class="p">[</span><span class="s2">&quot;Checking-Blocks&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">failed_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "3af3a1152c9d48e387ea3c36a4f4e70d", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Checking-Blocks:

    num blocks : 100
    completed ✔: 84 (skipped 0)
    failed    ✗: 16
    orphaned  ∅: 0

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "17e738bbabd94656b950fe8f785579a6", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Checking-Blocks:

    num blocks : 100
    completed ✔: 97 (skipped 84)
    failed    ✗: 3
    orphaned  ∅: 0

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "25793a7e88434d50996806663dc78d74", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task Checking-Blocks:

    num blocks : 100
    completed ✔: 100 (skipped 97)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<p>It took a few tries to complete the task since approximately 20% of the remaining blocks fail on each attempt. We could also have set <code class="docutils literal notranslate"><span class="pre">max_retries</span></code> to a higher number to allow for retrying failed blocks during the same task execution. This is to account for random failures due to network issues or other random uncontrollable factors, but will not help if there is a logical bug in your code. In this case since the failure is random, retrying does help.</p>
</section>
<section id="Different-read/write-sizes-and-boundary-handling">
<h3>Different read/write sizes and boundary handling<a class="headerlink" href="#Different-read/write-sizes-and-boundary-handling" title="Link to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># fit: &quot;valid&quot;, &quot;overhang&quot;, &quot;shrink&quot;</span>

<span class="c1"># Create a super simple task</span>
<span class="n">overhang_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;overhang&quot;</span><span class="p">,</span>  <span class="c1"># We give the task a name</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,)),</span>  <span class="c1"># a 1-D bounding box [0,100)</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,)),</span>  <span class="c1"># We read in blocks of size [0,1)</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,)),</span>  <span class="c1"># We write in blocks of size [0, 1)</span>
    <span class="n">process_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>  <span class="c1"># Empty process function</span>
    <span class="n">fit</span><span class="o">=</span><span class="s2">&quot;overhang&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">valid_task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;valid&quot;</span><span class="p">,</span>  <span class="c1"># We give the task a name</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,)),</span>  <span class="c1"># a 1-D bounding box [0,100)</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,)),</span>  <span class="c1"># We read in blocks of size [0,1)</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,)),</span>  <span class="c1"># We write in blocks of size [0, 1)</span>
    <span class="n">process_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>  <span class="c1"># Empty process function</span>
    <span class="n">fit</span><span class="o">=</span><span class="s2">&quot;valid&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>because we now have:</p>
<p>total roi: [0, 100)</p>
<p>read roi: [0, 9)</p>
<p>write roi: [2, 7)</p>
<p>There is a “context” of 2 pixels between the read_roi and write roi. Removing this context from the total roi gives us a “total write roi” of [2, 98). Note that the total number of pixels to tile is 96, which is not evenly divisible by the chunk size of 5. So our final block will have write roi of [97, 102) and a read roi of [95, 104). Depending on your task, reading, and especially writing outside of the given total roi bounds can cause problems. in these cases we can handle the final block in
a few ways. “valid”: ignore the final block. “overhang”: process the final block. “shrink”: shrink the read/write rois until the read roi is fully contained in the total roi. In this case the “shrink” strategy would shrink the read roi to [95, 100) and the write roi to [97, 98).</p>
<p>Now when we executing the overhang task it will have one more block processed than the valid task</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">overhang_task</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">valid_task</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "96e7392104ac4bcba14987c4899e96e1", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task overhang:

    num blocks : 20
    completed ✔: 20 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "84462eaadaee40bd93374cbe400bc638", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task valid:

    num blocks : 19
    completed ✔: 19 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
defaultdict(daisy.task_state.TaskState,
            {&#39;valid&#39;: Started: True
             Total Blocks: 19
             Ready: 0
             Processing: 0
             Pending: 0
             Completed: 19
             Skipped: 0
             Failed: 0
             Orphaned: 0})
</pre></div></div>
</div>
</section>
<section id="Task-Chaining">
<h3>Task Chaining<a class="headerlink" href="#Task-Chaining" title="Link to this heading"></a></h3>
<p>It is also possible to chain multiple tasks together in such a way that they either run in parallel or in sequence. If running in parallel, we simply start the workers for both tasks at once. If running in sequence, blocks will only be realeased once their dependencies in previous tasks have been completed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_roi</span> <span class="o">=</span> <span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1250</span><span class="p">,</span> <span class="mi">1250</span><span class="p">))</span>
<span class="n">read_roi_shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
<span class="n">write_roi_shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>

<span class="n">task_a_to_b</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;A_to_B&quot;</span><span class="p">,</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">read_roi_shape</span><span class="p">),</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">write_roi_shape</span><span class="p">),</span>
    <span class="n">process_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">task_b_to_c</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="s2">&quot;B_to_C&quot;</span><span class="p">,</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="o">.</span><span class="n">grow</span><span class="p">(</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">read_roi_shape</span><span class="p">),</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">Roi</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">write_roi_shape</span><span class="p">),</span>
    <span class="n">process_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">read_write_conflict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">upstream_tasks</span><span class="o">=</span><span class="p">[</span><span class="n">task_a_to_b</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">task_a_to_b</span><span class="p">,</span> <span class="n">task_b_to_c</span><span class="p">],</span> <span class="n">multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "111f7367edd342d79cbb60ae8e745eb5", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "809e09747fb44f82aee80b96838be8c0", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task A_to_B:

    num blocks : 25
    completed ✔: 25 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully

  Task B_to_C:

    num blocks : 25
    completed ✔: 25 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
defaultdict(daisy.task_state.TaskState,
            {&#39;A_to_B&#39;: Started: True
             Total Blocks: 25
             Ready: 0
             Processing: 0
             Pending: 0
             Completed: 25
             Skipped: 0
             Failed: 0
             Orphaned: 0,
             &#39;B_to_C&#39;: Started: True
             Total Blocks: 25
             Ready: 0
             Processing: 0
             Pending: 0
             Completed: 25
             Skipped: 0
             Failed: 0
             Orphaned: 0})
</pre></div></div>
</div>
<p>Here is an mp4 visualization of the above task</p>
<img alt="task chaining" src="_static/task_chaining.gif" />
</section>
</section>
</section>
<section id="Map-Reduce-and-Some-simple-benchmarks">
<h1>Map Reduce and Some simple benchmarks<a class="headerlink" href="#Map-Reduce-and-Some-simple-benchmarks" title="Link to this heading"></a></h1>
<section id="Simple-data">
<h2>Simple data<a class="headerlink" href="#Simple-data" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">timeit</span>

<span class="n">shape</span> <span class="o">=</span> <span class="mi">4096000</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Array a: </span><span class="si">{</span><span class="n">a</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Array a: [0 1 2 3 4 5] ...
</pre></div></div>
</div>
</section>
<section id="Map">
<h2>Map<a class="headerlink" href="#Map" title="Link to this heading"></a></h2>
<p>Here we will square each element in the array <code class="docutils literal notranslate"><span class="pre">a</span></code> and store the result in a new array <code class="docutils literal notranslate"><span class="pre">b</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">process_fn</span><span class="p">():</span>
    <span class="c1"># iterating and squaring each element in a and store to b</span>
    <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">nditer</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">],</span> <span class="n">op_flags</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;readonly&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;readwrite&quot;</span><span class="p">]])</span> <span class="k">as</span> <span class="n">it</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">it</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
                <span class="n">y</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>


<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Squaring array a took </span><span class="si">{</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">process_fn</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Array b: </span><span class="si">{</span><span class="n">b</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Squaring array a took 3.258563630000026 seconds
Array b: [ 0  1  4  9 16 25] ...
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">daisy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">funlib.persistence</span><span class="w"> </span><span class="kn">import</span> <span class="n">Array</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">zarr</span>

<span class="n">shape</span> <span class="o">=</span> <span class="mi">4096000</span>
<span class="n">block_shape</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">16</span>

<span class="c1"># input array is wrapped in Array for easy of Roi indexing</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">),</span>
    <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,),</span>
    <span class="n">voxel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,),</span>
<span class="p">)</span>

<span class="c1"># to parallelize across processes, we need persistent read/write arrays</span>
<span class="c1"># we&#39;ll use zarr here to do do that</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open_array</span><span class="p">(</span>
    <span class="n">zarr</span><span class="o">.</span><span class="n">TempStore</span><span class="p">(),</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">shape</span><span class="p">,),</span> <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="n">block_shape</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span>
<span class="p">)</span>
<span class="c1"># output array is wrapped in Array for easy of Roi indexing</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span>
    <span class="n">b</span><span class="p">,</span>
    <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,),</span>
    <span class="n">voxel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># same process function as previously, but with additional code</span>
<span class="c1"># to read and write data to persistent arrays</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_fn_daisy</span><span class="p">(</span><span class="n">block</span><span class="p">):</span>
    <span class="n">a_sub</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">read_roi</span><span class="p">]</span>
    <span class="n">b_sub</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">a_sub</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">nditer</span><span class="p">(</span>
        <span class="p">[</span><span class="n">a_sub</span><span class="p">,</span> <span class="n">b_sub</span><span class="p">],</span>
        <span class="n">op_flags</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;readonly&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;readwrite&quot;</span><span class="p">]],</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">it</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">it</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
                <span class="n">y</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

    <span class="n">b</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span> <span class="o">=</span> <span class="n">b_sub</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="n">shape</span><span class="p">)</span>  <span class="c1"># total ROI to map process over</span>
<span class="n">block_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="p">(</span><span class="n">block_shape</span><span class="p">,))</span>  <span class="c1"># block ROI for parallel processing</span>

<span class="c1"># creating a Daisy task, note that we do not specify how each</span>
<span class="c1"># worker should read/write to input/output arrays</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">process_fn_daisy</span><span class="p">,</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">task_id</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">task</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Array b: </span><span class="si">{</span><span class="n">b</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "c189d608bfdb43d8a28507b436ae3074", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task square:

    num blocks : 250
    completed ✔: 250 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
Array b: [ 0  1  4  9 16 25] ...
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># run this to benchmark daisy!</span>
<span class="n">run_daisy</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">task</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Squaring array a with daisy took </span><span class="si">{</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">run_daisy</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "6aa625836ba14397abf5df871513a12b", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task square:

    num blocks : 250
    completed ✔: 250 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
Squaring array a with daisy took 2.3006694119999906 seconds
</pre></div></div>
</div>
</section>
<section id="Reduce">
<h2>Reduce<a class="headerlink" href="#Reduce" title="Link to this heading"></a></h2>
<p>Here we will take the sum over every 16 elements in the array <code class="docutils literal notranslate"><span class="pre">b</span></code> and store the result in a new array <code class="docutils literal notranslate"><span class="pre">c</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">multiprocessing</span>

<span class="n">reduce_shape</span> <span class="o">=</span> <span class="n">shape</span> <span class="o">/</span> <span class="mi">16</span>

<span class="c1"># while using zarr with daisy.Array can be easier to understand and less error prone, it is not a requirement.</span>
<span class="c1"># Here we make a shared memory array for collecting results from different workers</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="s2">&quot;Q&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">shape</span> <span class="o">/</span> <span class="n">reduce_shape</span><span class="p">)))</span>


<span class="k">def</span><span class="w"> </span><span class="nf">process_fn_sum_reduce</span><span class="p">(</span><span class="n">block</span><span class="p">):</span>
    <span class="n">b_sub</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="p">]</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">b_sub</span><span class="p">)</span>
    <span class="c1"># compute c idx based on block offset and shape</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="o">.</span><span class="n">offset</span> <span class="o">/</span> <span class="n">block</span><span class="o">.</span><span class="n">write_roi</span><span class="o">.</span><span class="n">shape</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">c</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>


<span class="n">total_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="n">shape</span><span class="p">)</span>  <span class="c1"># total ROI to map process over</span>
<span class="n">block_roi</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Roi</span><span class="p">((</span><span class="mi">0</span><span class="p">,),</span> <span class="n">reduce_shape</span><span class="p">)</span>  <span class="c1"># block ROI for parallel processing</span>

<span class="n">task1</span> <span class="o">=</span> <span class="n">daisy</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span>
    <span class="n">total_roi</span><span class="o">=</span><span class="n">total_roi</span><span class="p">,</span>
    <span class="n">read_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
    <span class="n">write_roi</span><span class="o">=</span><span class="n">block_roi</span><span class="p">,</span>
    <span class="n">process_function</span><span class="o">=</span><span class="n">process_fn_sum_reduce</span><span class="p">,</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">task_id</span><span class="o">=</span><span class="s2">&quot;sum_reduce&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">daisy</span><span class="o">.</span><span class="n">run_blockwise</span><span class="p">([</span><span class="n">task1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">[:])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "6b7afdd9bac44b31b16ae243b459c8f6", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Execution Summary
-----------------

  Task sum_reduce:

    num blocks : 16
    completed ✔: 16 (skipped 0)
    failed    ✗: 0
    orphaned  ∅: 0

    all blocks processed successfully
[5592372565376000, 39146739029376000, 106255537493376000, 206918767957376000, 341136430421376000, 508908524885376000, 710235051349376000, 945116009813376000, 1213551400277376000, 1515541222741376000, 1851085477205376000, 2220184163669376000, 2622837282133376000, 3059044832597376000, 3528806815061376000, 4032123229525376000]
</pre></div></div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"00a2c2f86a464ef5b107c093ef4656ff": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_761b77e2846e47e69473511e16c803b4", "placeholder": "\u200b", "style": "IPY_MODEL_148bb07be8554502b6a5be8b067de024", "tabbable": null, "tooltip": null, "value": "\u200764/64\u2007[00:01&lt;00:00,\u200753.69blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=64,\u2007\u2717=0,\u2007\u2205=0]"}}, "0296c4ad84674b9ab40df006b038706c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_a8ac709641724956a3d236ebe6a0e732", "IPY_MODEL_fd7291e5c58c40a5b0c244d988f07daa", "IPY_MODEL_cb64de5331e74223881da97516132e07"], "layout": "IPY_MODEL_afdc2cc2e5c04f329e2ba1005d503d95", "tabbable": null, "tooltip": null}}, "03012f248d774c04a5dbc338737d6939": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0385f02f921a4aa6a05e2761299b8fc5": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "04b560a298d4459eb26b8c8b1436af39": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "06ee8b93131e4c4dbf00cd4e1bb7fe7a": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "07c664d518c740b7943accf7bb2ca22d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "07d787f53fe743a4b9a0ef34abd58475": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_6a784f45532a4ce8948c15c024c3d8ee", "max": 100.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_cd6e011b3d304411acf0823765443764", "tabbable": null, "tooltip": null, "value": 29.0}}, "087bd8be61c14303a69252093d21447b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "095491901a4d45f788b5fe18a8366578": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_50af237c79494679813dcc0a84574af4", "max": 16.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_ed51efe31ada4a80bae5225148c4f30f", "tabbable": null, "tooltip": null, "value": 16.0}}, "0954d94754ad4b3db256b1d19c65986a": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0aac44a294684862b50378b20a751689": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "0b268d1cf2dc4f1dbbbad3e1f4177b23": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "0bbef82a07fa4d3baf2433f2dadbb160": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "0bdad7243a794afe937a7d696bbb6359": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0efd336e66104ca2ac02de2b91bda4db": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0f1f7457a1b3445b8d72fc4c3423b932": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_46c2a3071284453b87e406802ba0e5a7", "placeholder": "\u200b", "style": "IPY_MODEL_0bbef82a07fa4d3baf2433f2dadbb160", "tabbable": null, "tooltip": null, "value": "\u200757/64\u2007[00:01&lt;00:00,\u200747.24blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=57,\u2007\u2717=7,\u2007\u2205=0]"}}, "108b5c5521ca4ecea658478e1830ee50": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "10e2ddfad3014d51a96f4df4734e41a4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "111f7367edd342d79cbb60ae8e745eb5": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_c20ef2e408fe4d6fbba0e9f0b8f185ab", "IPY_MODEL_5f91c45dadc34e85a36306b7fd709697", "IPY_MODEL_652ba9e116494bc4bdc642f9cd5c1232"], "layout": "IPY_MODEL_c971e7a808e04699a3591bf9d7f99ee1", "tabbable": null, "tooltip": null}}, "115e915dc6a5434e8260e1968b49c510": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "12279a2f5ffb4a269f1f1ad2ef75f217": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "122e9d822ec94b9389561408f2bfeaf9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_853e1058366e49bb9ed9e36d0adeb678", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_7694f392510a4003851f6c25b402d38f", "tabbable": null, "tooltip": null, "value": 37.0}}, "148bb07be8554502b6a5be8b067de024": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "15459b56f86448838ad9b2331d2e4a4d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "15c26fdd71eb4869a29f1c7b721f7e15": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "17afb3cce6bc4786a045f06bc889d6b4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_98d6445a5a94419aac66118792d27210", "placeholder": "\u200b", "style": "IPY_MODEL_3d42da5c8aa24eb899ab5ded9ade3e19", "tabbable": null, "tooltip": null, "value": "\u2007250/250\u2007[00:02&lt;00:00,\u2007123.48blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=250,\u2007\u2717=0,\u2007\u2205=0]"}}, "17e738bbabd94656b950fe8f785579a6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_61de1ec390e0488e83eac7d8de22d509", "IPY_MODEL_2c633c038cab4f469a3774204fff9267", "IPY_MODEL_2841bc23092d482e88fd2807a3c50a8f"], "layout": "IPY_MODEL_e335dfd418cf4d27bf5f4893a217bdb4", "tabbable": null, "tooltip": null}}, "1a124e7edc0847849765a7bbc48feae2": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_7e598c7a208c4bbda8e8735e0db5f4b6", "placeholder": "\u200b", "style": "IPY_MODEL_f3f2932e9bce40068da44325b65ad36b", "tabbable": null, "tooltip": null, "value": "segmentation\u2007\u2714:\u2007100%"}}, "1a470c884ed74f53a368ac28b0816389": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "1a56d948d8b14b6aa734aaecfd8fa0bd": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_f099ef02c9ea450481b445126f9d7545", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_8b83d2c90524467a9264114f69ded307", "tabbable": null, "tooltip": null, "value": 64.0}}, "1a80c7c1e96e4366ad869d1d07b726c9": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1bfd213edd6e4283acc92daf68144f2c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1cbab73c4fe24351a054960bc0cff43e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_c301236bcbb54d42aba3b5f9e81ef6f9", "max": 25.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_b0ab7a6049604dc5b3a8a4d9fba88216", "tabbable": null, "tooltip": null, "value": 25.0}}, "1d59b83e61df418a96d2e5da9f23ddb8": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1db63ad9874d4eaa92fa35707970f30a": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1efa0c6bd6174ceab80654fde69133a9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_6bb7ee7c37154aee8e406e792135c30c", "IPY_MODEL_974fea0bdc174468bb030d73b8c3ab35", "IPY_MODEL_00a2c2f86a464ef5b107c093ef4656ff"], "layout": "IPY_MODEL_9a8d282a281a4ad5b999c779e0d56f9c", "tabbable": null, "tooltip": null}}, "2203890501384a4483a547b943a73057": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_e95124efa2154a7fad5115c919980594", "max": 16.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_594a909ee58145fcb1234cd3cb922951", "tabbable": null, "tooltip": null, "value": 16.0}}, "22402445fd3f41879a8ddf988d3353bc": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "225a1ada437f401395a52b84073b0fc4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_3d93b6774c60409da5ae5974f549fbc0", "max": 100.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_ce31ec1a99574161907469d52dc4fc74", "tabbable": null, "tooltip": null, "value": 100.0}}, "22f211b292fc47259a19ccfb9bffdebc": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "25793a7e88434d50996806663dc78d74": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_8c8a15f73b2c40f594c4b0e2ad136d7b", "IPY_MODEL_07d787f53fe743a4b9a0ef34abd58475", "IPY_MODEL_93d225ac834b4474a36e78dcf362ddd4"], "layout": "IPY_MODEL_a069b92b05564880bc679da4ac9bff42", "tabbable": null, "tooltip": null}}, "269d11b96a394364be19165af393d0b3": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "2841bc23092d482e88fd2807a3c50a8f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_6bbb6e551480439ba121089e61cf2feb", "placeholder": "\u200b", "style": "IPY_MODEL_f2895204c35a41058e762215286affca", "tabbable": null, "tooltip": null, "value": "\u200794/100\u2007[00:00&lt;00:00,\u20072575.36blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=94,\u2007\u2717=3,\u2007\u2205=0]"}}, "285b5f4b875941de93437815c6c9a093": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "2c633c038cab4f469a3774204fff9267": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_03012f248d774c04a5dbc338737d6939", "max": 100.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_7fcc90dc54c3478fb34ab2b5c9bdedff", "tabbable": null, "tooltip": null, "value": 94.0}}, "2c8aca33d01c4442b936864a9b43f179": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_69d10925269e4482abc74dc917144f81", "placeholder": "\u200b", "style": "IPY_MODEL_5a41c8dd7aad47928627b8a45f3165ff", "tabbable": null, "tooltip": null, "value": "\u200764/64\u2007[00:00&lt;00:00,\u200792.58blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=64,\u2007\u2717=0,\u2007\u2205=0]"}}, "30ad5f921aaf4ab5baa17dd6e0597390": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "30c3578577264ff9a83dd17f9358263f": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "33c7ade4dfef4dc4ab90515dce491d5a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "3755223183f24ed08efe4289e03e9049": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "37961f598e3348468ad4978e2cf0c858": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "3af3a1152c9d48e387ea3c36a4f4e70d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_c5080998cce044509a381fd9740c1d54", "IPY_MODEL_61a38293357e4b83b2d5413f6c3bde46", "IPY_MODEL_b47bbc80e8344b58b5afaa3bc37017e1"], "layout": "IPY_MODEL_888bb9a3865747aab78dbccbac852564", "tabbable": null, "tooltip": null}}, "3d42da5c8aa24eb899ab5ded9ade3e19": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "3d49c98424504faa91e266f4f33e1b97": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "3d93b6774c60409da5ae5974f549fbc0": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "41628b837e8448f58bd1b8207e556d20": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "41d0dbf17b5b467cb0b185e5aedf4960": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_726744213ddb4ce5a6ba9060b56f3926", "IPY_MODEL_c4e2d0ef7a414b44aa97943a969520f1", "IPY_MODEL_77d466eee08d438c86ce06c8412a4008"], "layout": "IPY_MODEL_1db63ad9874d4eaa92fa35707970f30a", "tabbable": null, "tooltip": null}}, "41fce6e52f35479295c4b57026bb3893": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "428ea2b993a040adb27117a834b89e20": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "44b94c99b174463aa097f1ba23a3acdc": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "45a99d8ff16d4f459989800b1b86c87a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "46823a27caab41aba6321db066e50763": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "46c2a3071284453b87e406802ba0e5a7": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "48fb3f2414b844ec8135bc9954165a23": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "4999eb16ed9741beb74f37c461e5d155": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "49d67c58f1734e269d7f95ee2a7ced00": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "4b7ec8adc7ef4c0e9204700a82576c6d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_a57105e755db48b78287166cf27c0c6f", "IPY_MODEL_225a1ada437f401395a52b84073b0fc4", "IPY_MODEL_8d26186ebf8c482bba553f8eff4d636c"], "layout": "IPY_MODEL_c3b872624e1d4d7e982a74340609d04c", "tabbable": null, "tooltip": null}}, "50af237c79494679813dcc0a84574af4": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "534e03a4319140f1a5f4260ce5becbd9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "54b2d8428a904984a031311d37116f5e": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "554796693d1b41829e3b524965a78346": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_76829bd497904454849e3c1c96c15c0f", "placeholder": "\u200b", "style": "IPY_MODEL_8f38fba8b96c4a0dad01245b529cc79b", "tabbable": null, "tooltip": null, "value": "square\u2007\u2714:\u2007100%"}}, "55948b0a74ad48dbb689b370e1949c90": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "55b493cdedf14b3cb70fa414f5340837": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "55f33f9192d3469189397312e788e988": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_9557cc4dd12d4401a445d0d7a908aa12", "placeholder": "\u200b", "style": "IPY_MODEL_6ef3ab59b00e44fb8536993745999fd8", "tabbable": null, "tooltip": null, "value": "segmentation_with_context\u2007\u2714:\u2007100%"}}, "5794eb78d25f4e5c9487a55fa6ea494b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "57aba6a9f32344a59bf658ddc9174812": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_1a124e7edc0847849765a7bbc48feae2", "IPY_MODEL_095491901a4d45f788b5fe18a8366578", "IPY_MODEL_81007672df9b48c4b8ef45d887aac8c1"], "layout": "IPY_MODEL_1d59b83e61df418a96d2e5da9f23ddb8", "tabbable": null, "tooltip": null}}, "57e7073c2c264cce9213b3ef02ea33f9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_30c3578577264ff9a83dd17f9358263f", "placeholder": "\u200b", "style": "IPY_MODEL_10e2ddfad3014d51a96f4df4734e41a4", "tabbable": null, "tooltip": null, "value": "fault\u2007tolerance\u2007test\u2007\u2717:\u2007\u200789%"}}, "594a909ee58145fcb1234cd3cb922951": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "5a41c8dd7aad47928627b8a45f3165ff": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "5f91c45dadc34e85a36306b7fd709697": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_48fb3f2414b844ec8135bc9954165a23", "max": 25.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_85b66024fe474ecdb8a9ddbca7437183", "tabbable": null, "tooltip": null, "value": 25.0}}, "609ed6c7aabd47fb8395adeedaa32c06": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_dfb6d02f320c4a9f9c303fdcab4f7b64", "placeholder": "\u200b", "style": "IPY_MODEL_63cdf8cf48e74fb7bbcbf3413dc0cca1", "tabbable": null, "tooltip": null, "value": "\u200725/25\u2007[00:00&lt;00:00,\u2007183.91blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=25,\u2007\u2717=0,\u2007\u2205=0]"}}, "61a38293357e4b83b2d5413f6c3bde46": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_8d58894397a64a588165ab1f72f93c6f", "max": 100.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_6244c4b8edf041949fd8ca4fbb0319e4", "tabbable": null, "tooltip": null, "value": 84.0}}, "61de1ec390e0488e83eac7d8de22d509": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_55948b0a74ad48dbb689b370e1949c90", "placeholder": "\u200b", "style": "IPY_MODEL_79db12b3461541be96ec58eee3dccf19", "tabbable": null, "tooltip": null, "value": "Checking-Blocks\u2007\u25b6:\u2007\u200794%"}}, "6244c4b8edf041949fd8ca4fbb0319e4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "63cdf8cf48e74fb7bbcbf3413dc0cca1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "63d59173bd3d440b83e7ae383f9a6f8e": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "646fdb3f89444dc881d17287b1a5f1c4": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "652ba9e116494bc4bdc642f9cd5c1232": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_8de0bef8db0e430885e8e11867fd4799", "placeholder": "\u200b", "style": "IPY_MODEL_1a470c884ed74f53a368ac28b0816389", "tabbable": null, "tooltip": null, "value": "\u200725/25\u2007[00:00&lt;00:00,\u2007115.95blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=25,\u2007\u2717=0,\u2007\u2205=0]"}}, "65eb65eb94574174b866db5d3a322065": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "6894175c714246be84cb1f06161013d3": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_285b5f4b875941de93437815c6c9a093", "placeholder": "\u200b", "style": "IPY_MODEL_15459b56f86448838ad9b2331d2e4a4d", "tabbable": null, "tooltip": null, "value": "fault\u2007tolerance\u2007test\u2007\u2717:\u2007\u200783%"}}, "69d10925269e4482abc74dc917144f81": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6a784f45532a4ce8948c15c024c3d8ee": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6aa625836ba14397abf5df871513a12b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_554796693d1b41829e3b524965a78346", "IPY_MODEL_b20fa62a77134d7ea75c043a1449e3e7", "IPY_MODEL_c3bd984f917a4e4789d5ec034dba61ff"], "layout": "IPY_MODEL_1bfd213edd6e4283acc92daf68144f2c", "tabbable": null, "tooltip": null}}, "6b7afdd9bac44b31b16ae243b459c8f6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_8e5b57e0dae6484f8edb8ecb293513e4", "IPY_MODEL_8855c7f27cd8473f882255f98a1b6c90", "IPY_MODEL_e01968ab65164a02a51c8224be4c58e2"], "layout": "IPY_MODEL_54b2d8428a904984a031311d37116f5e", "tabbable": null, "tooltip": null}}, "6bb7ee7c37154aee8e406e792135c30c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_a94b4a5d98ad474fbdbfc8efd92e33a9", "placeholder": "\u200b", "style": "IPY_MODEL_115e915dc6a5434e8260e1968b49c510", "tabbable": null, "tooltip": null, "value": "smooth_for_seg\u2007\u2714:\u2007100%"}}, "6bbb6e551480439ba121089e61cf2feb": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6ca9c7416a924301a6cc7eb01e5fa7cf": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6cabdc5730874471bfe5911f8a29ab46": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "6ef3ab59b00e44fb8536993745999fd8": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "6f4261601a114f9eba90f12b9ccc2d32": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_d1c433d1da304e0cae397923f0fc9f04", "IPY_MODEL_122e9d822ec94b9389561408f2bfeaf9", "IPY_MODEL_e46662c4c262415e8ad48abf0f985c86"], "layout": "IPY_MODEL_04b560a298d4459eb26b8c8b1436af39", "tabbable": null, "tooltip": null}}, "705b23ae641e4f61a197ae92529c8f5c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "71cc5d38293a4e548ed6092e7345a83e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_55f33f9192d3469189397312e788e988", "IPY_MODEL_2203890501384a4483a547b943a73057", "IPY_MODEL_f4b87339c1ca4486b6c95c8c7fbc4c49"], "layout": "IPY_MODEL_df639f4bbd734d97a0fcc8ba26e35ca1", "tabbable": null, "tooltip": null}}, "7204200a5cc243f3b7c72479ad2a2bd6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_8dd97a77d5884bfd89039855f2931163", "placeholder": "\u200b", "style": "IPY_MODEL_b96f27fb07b94fe58d4355519c06b5a1", "tabbable": null, "tooltip": null, "value": "Failures\u2007\u2717:\u2007\u200783%"}}, "726744213ddb4ce5a6ba9060b56f3926": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_f6079c6612154d659eb4aa7a3365bf88", "placeholder": "\u200b", "style": "IPY_MODEL_75a5be7df86b4f839e352cac19e9e3ff", "tabbable": null, "tooltip": null, "value": "smoothing_subprocess\u2007\u2714:\u2007100%"}}, "73bba78800d24cdb8329bce6e723f872": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_9291fa7a536946ba8a18f6ffc0378f49", "placeholder": "\u200b", "style": "IPY_MODEL_55b493cdedf14b3cb70fa414f5340837", "tabbable": null, "tooltip": null, "value": "square\u2007\u2714:\u2007100%"}}, "74c382cce63a4bf7b42b141591ac561e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "74ec9ccc71b6426a8591478352770509": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_1a80c7c1e96e4366ad869d1d07b726c9", "max": 100.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_45a99d8ff16d4f459989800b1b86c87a", "tabbable": null, "tooltip": null, "value": 83.0}}, "75a5be7df86b4f839e352cac19e9e3ff": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "761b77e2846e47e69473511e16c803b4": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "76829bd497904454849e3c1c96c15c0f": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7694f392510a4003851f6c25b402d38f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "77d466eee08d438c86ce06c8412a4008": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_6ca9c7416a924301a6cc7eb01e5fa7cf", "placeholder": "\u200b", "style": "IPY_MODEL_8bbc9e50ff084826a3ee774887e7b633", "tabbable": null, "tooltip": null, "value": "\u200764/64\u2007[00:01&lt;00:00,\u200738.17blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=64,\u2007\u2717=0,\u2007\u2205=0]"}}, "790cac2e8f174ef285dfd5c30c40eeb2": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "793bfa7e1507408ba855937aac6196b3": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7974dcf08b7f42dfaf2710be7660f4cb": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "79db12b3461541be96ec58eee3dccf19": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "7b3104cbd31c48a79535134c2ea14384": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_41628b837e8448f58bd1b8207e556d20", "max": 19.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_b85824b4cc8549dda971da10fa996af8", "tabbable": null, "tooltip": null, "value": 19.0}}, "7c2a085de24c47539d3cf98c4606bc7a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "7dcb41004e914fad94b70337a8d85f21": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7e598c7a208c4bbda8e8735e0db5f4b6": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7f6ecde804cf448382fbf77c9ea675f0": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_ae3814721b7a4f90858caa2833488b22", "placeholder": "\u200b", "style": "IPY_MODEL_9c28eb22421a40f982988e32cd9c0ae9", "tabbable": null, "tooltip": null, "value": "B_to_C\u2007\u2714:\u2007100%"}}, "7fcc90dc54c3478fb34ab2b5c9bdedff": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "809e09747fb44f82aee80b96838be8c0": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_7f6ecde804cf448382fbf77c9ea675f0", "IPY_MODEL_1cbab73c4fe24351a054960bc0cff43e", "IPY_MODEL_609ed6c7aabd47fb8395adeedaa32c06"], "layout": "IPY_MODEL_b21a484308604c1688a396ca686248e7", "tabbable": null, "tooltip": null}}, "81007672df9b48c4b8ef45d887aac8c1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_790cac2e8f174ef285dfd5c30c40eeb2", "placeholder": "\u200b", "style": "IPY_MODEL_41fce6e52f35479295c4b57026bb3893", "tabbable": null, "tooltip": null, "value": "\u200716/16\u2007[00:01&lt;00:00,\u200710.04blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=16,\u2007\u2717=0,\u2007\u2205=0]"}}, "81e3a1c3742b4bf499b29d330fbafb13": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "84462eaadaee40bd93374cbe400bc638": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_f4a70a5a8c1e4f29b66df9cceee108e2", "IPY_MODEL_7b3104cbd31c48a79535134c2ea14384", "IPY_MODEL_bf69d56d886b484cad45189f932f6137"], "layout": "IPY_MODEL_7dcb41004e914fad94b70337a8d85f21", "tabbable": null, "tooltip": null}}, "84b0d6ab114840deb0bd170aa046fa85": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "84bfabee06594b17bd19fd0813982633": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "853e1058366e49bb9ed9e36d0adeb678": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "85b66024fe474ecdb8a9ddbca7437183": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "87ef95156779406db4f080c5705d3289": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "8844d0b1717f483faf999ff4cdc42606": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_ce05c42aa38744f8bb38343ed0b1c159", "max": 20.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_65eb65eb94574174b866db5d3a322065", "tabbable": null, "tooltip": null, "value": 20.0}}, "8855c7f27cd8473f882255f98a1b6c90": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_63d59173bd3d440b83e7ae383f9a6f8e", "max": 16.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_d4ae99ede64d490082a62b0b2bd09f96", "tabbable": null, "tooltip": null, "value": 16.0}}, "888bb9a3865747aab78dbccbac852564": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8b83d2c90524467a9264114f69ded307": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "8bbc9e50ff084826a3ee774887e7b633": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "8c8a15f73b2c40f594c4b0e2ad136d7b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_646fdb3f89444dc881d17287b1a5f1c4", "placeholder": "\u200b", "style": "IPY_MODEL_c797b78e400645fdae77522e84edb7f9", "tabbable": null, "tooltip": null, "value": "Checking-Blocks\u2007\u25b6:\u2007\u200729%"}}, "8c997f78ea4345e4a133813d2b333705": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_22f211b292fc47259a19ccfb9bffdebc", "placeholder": "\u200b", "style": "IPY_MODEL_74c382cce63a4bf7b42b141591ac561e", "tabbable": null, "tooltip": null, "value": "\u200720/20\u2007[00:00&lt;00:00,\u2007859.88blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=20,\u2007\u2717=0,\u2007\u2205=0]"}}, "8d26186ebf8c482bba553f8eff4d636c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_0385f02f921a4aa6a05e2761299b8fc5", "placeholder": "\u200b", "style": "IPY_MODEL_33c7ade4dfef4dc4ab90515dce491d5a", "tabbable": null, "tooltip": null, "value": "\u2007100/100\u2007[00:01&lt;00:00,\u200757.00blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=100,\u2007\u2717=0,\u2007\u2205=0]"}}, "8d58894397a64a588165ab1f72f93c6f": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8dd97a77d5884bfd89039855f2931163": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8de0bef8db0e430885e8e11867fd4799": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8e5b57e0dae6484f8edb8ecb293513e4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_84b0d6ab114840deb0bd170aa046fa85", "placeholder": "\u200b", "style": "IPY_MODEL_108b5c5521ca4ecea658478e1830ee50", "tabbable": null, "tooltip": null, "value": "sum_reduce\u2007\u2714:\u2007100%"}}, "8f1ce28e2afb48aaaabab5d801b927f6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "8f38fba8b96c4a0dad01245b529cc79b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "901469bee5354080afe9cd1601486f32": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "9054d74108a649c2912a40a0fcfbc51f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "912c275a19cb43cb88b136aface2be8c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "91d6bd7119ad40e4b8c05dcc6d23507f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_b08a8ddd38e84fd597a7f337ff1b7512", "placeholder": "\u200b", "style": "IPY_MODEL_0b268d1cf2dc4f1dbbbad3e1f4177b23", "tabbable": null, "tooltip": null, "value": "Smoothing\u2007with\u2007context\u2007\u2714:\u2007100%"}}, "9291fa7a536946ba8a18f6ffc0378f49": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "93d225ac834b4474a36e78dcf362ddd4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_d24e39fef3754c80a130cab1fe67113e", "placeholder": "\u200b", "style": "IPY_MODEL_49d67c58f1734e269d7f95ee2a7ced00", "tabbable": null, "tooltip": null, "value": "\u200729/100\u2007[00:00&lt;00:00,\u2007644.32blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=29,\u2007\u2717=0,\u2007\u2205=0]"}}, "947b76502ab74c4a911de4a5afae1fc3": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_06ee8b93131e4c4dbf00cd4e1bb7fe7a", "placeholder": "\u200b", "style": "IPY_MODEL_8f1ce28e2afb48aaaabab5d801b927f6", "tabbable": null, "tooltip": null, "value": "\u200764/64\u2007[00:00&lt;00:00,\u2007104.34blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=64,\u2007\u2717=0,\u2007\u2205=0]"}}, "9557cc4dd12d4401a445d0d7a908aa12": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "95dcfedc3e6c43a79d727dcce7912934": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "96e7392104ac4bcba14987c4899e96e1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_aee04b0400934f42a04e1884f78dee51", "IPY_MODEL_8844d0b1717f483faf999ff4cdc42606", "IPY_MODEL_8c997f78ea4345e4a133813d2b333705"], "layout": "IPY_MODEL_3755223183f24ed08efe4289e03e9049", "tabbable": null, "tooltip": null}}, "974fea0bdc174468bb030d73b8c3ab35": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_bf8560f7e9374181a472300f092ad5fd", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_5794eb78d25f4e5c9487a55fa6ea494b", "tabbable": null, "tooltip": null, "value": 64.0}}, "98d6445a5a94419aac66118792d27210": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "9a3881671e7e42f4981fd4620591e655": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "9a8d282a281a4ad5b999c779e0d56f9c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "9c28eb22421a40f982988e32cd9c0ae9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "9cfc81c67fd5431798e1681530731c37": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_fe6aff89f3e6407495bf7bbf381cb2f2", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_0aac44a294684862b50378b20a751689", "tabbable": null, "tooltip": null, "value": 57.0}}, "a0158c48c11745b3b38e22ae9a43534a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_6894175c714246be84cb1f06161013d3", "IPY_MODEL_ab37c1cf528140b595022848a71cd06a", "IPY_MODEL_d80f34cd52c942d88efe864dad0f7107"], "layout": "IPY_MODEL_30ad5f921aaf4ab5baa17dd6e0597390", "tabbable": null, "tooltip": null}}, "a069b92b05564880bc679da4ac9bff42": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "a57105e755db48b78287166cf27c0c6f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_bbd3ad64415d42d9b43a18d3f7ddab48", "placeholder": "\u200b", "style": "IPY_MODEL_bda54e9503d348689db67551ac716c92", "tabbable": null, "tooltip": null, "value": "Dummy\u2007\u2714:\u2007100%"}}, "a8ac709641724956a3d236ebe6a0e732": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_ce288c1e91474b9c8b6a2bb41dd7b0dd", "placeholder": "\u200b", "style": "IPY_MODEL_901469bee5354080afe9cd1601486f32", "tabbable": null, "tooltip": null, "value": "Dummy\u2007\u2714:\u2007100%"}}, "a94b4a5d98ad474fbdbfc8efd92e33a9": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ab37c1cf528140b595022848a71cd06a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "danger", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_fbf69126e164490d90cb6affa89a9b77", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_b092b27977f74ccb94386fc6ac7ef84a", "tabbable": null, "tooltip": null, "value": 53.0}}, "ae3814721b7a4f90858caa2833488b22": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "aee04b0400934f42a04e1884f78dee51": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_d7e7a08976d5411199233f2ba5095c06", "placeholder": "\u200b", "style": "IPY_MODEL_428ea2b993a040adb27117a834b89e20", "tabbable": null, "tooltip": null, "value": "overhang\u2007\u2714:\u2007100%"}}, "afdc2cc2e5c04f329e2ba1005d503d95": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b08a8ddd38e84fd597a7f337ff1b7512": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b092b27977f74ccb94386fc6ac7ef84a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "b0ab7a6049604dc5b3a8a4d9fba88216": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "b20fa62a77134d7ea75c043a1449e3e7": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_4999eb16ed9741beb74f37c461e5d155", "max": 250.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_dca75b6bba1a437f93fc7542f87bdd0c", "tabbable": null, "tooltip": null, "value": 250.0}}, "b21a484308604c1688a396ca686248e7": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b25256bd61ab4a61ba4f32a4157f8f6b": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b425473af0af4e8094da5fd516ada653": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_91d6bd7119ad40e4b8c05dcc6d23507f", "IPY_MODEL_d7a367e95813412abe3824db847f52b8", "IPY_MODEL_2c8aca33d01c4442b936864a9b43f179"], "layout": "IPY_MODEL_46823a27caab41aba6321db066e50763", "tabbable": null, "tooltip": null}}, "b444e28b306c4f39872d0c4695a77c35": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "b47bbc80e8344b58b5afaa3bc37017e1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_12279a2f5ffb4a269f1f1ad2ef75f217", "placeholder": "\u200b", "style": "IPY_MODEL_22402445fd3f41879a8ddf988d3353bc", "tabbable": null, "tooltip": null, "value": "\u200784/100\u2007[00:00&lt;00:00,\u2007990.40blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=84,\u2007\u2717=16,\u2007\u2205=0]"}}, "b5adb116a0c840b1b030e565fd8295a7": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "b67205e4750844fb936340bd58be764d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_7204200a5cc243f3b7c72479ad2a2bd6", "IPY_MODEL_74ec9ccc71b6426a8591478352770509", "IPY_MODEL_e041877575b944f88a9eaacdd810e124"], "layout": "IPY_MODEL_bb1067e262df4d0d9fe5fedc281408d5", "tabbable": null, "tooltip": null}}, "b85824b4cc8549dda971da10fa996af8": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "b96f27fb07b94fe58d4355519c06b5a1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "bb0f4ba8696e4fb9acd726e2f21463ab": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_57e7073c2c264cce9213b3ef02ea33f9", "IPY_MODEL_9cfc81c67fd5431798e1681530731c37", "IPY_MODEL_0f1f7457a1b3445b8d72fc4c3423b932"], "layout": "IPY_MODEL_d983d0cbd84849109bfb6c987dd13171", "tabbable": null, "tooltip": null}}, "bb1067e262df4d0d9fe5fedc281408d5": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "bbd3ad64415d42d9b43a18d3f7ddab48": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "bda54e9503d348689db67551ac716c92": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "bf0f0a7650e54181994edc8e4c5def89": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "bf31f54dc4d34fb098cf28ca51e25a0d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "bf69d56d886b484cad45189f932f6137": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_15c26fdd71eb4869a29f1c7b721f7e15", "placeholder": "\u200b", "style": "IPY_MODEL_bf8a5d2cc41943a8af44548bc134f2c1", "tabbable": null, "tooltip": null, "value": "\u200719/19\u2007[00:00&lt;00:00,\u2007698.56blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=19,\u2007\u2717=0,\u2007\u2205=0]"}}, "bf8560f7e9374181a472300f092ad5fd": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "bf8a5d2cc41943a8af44548bc134f2c1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "c189d608bfdb43d8a28507b436ae3074": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_73bba78800d24cdb8329bce6e723f872", "IPY_MODEL_e2107cc241a346b3bc988ec9b492706e", "IPY_MODEL_17afb3cce6bc4786a045f06bc889d6b4"], "layout": "IPY_MODEL_0954d94754ad4b3db256b1d19c65986a", "tabbable": null, "tooltip": null}}, "c20ef2e408fe4d6fbba0e9f0b8f185ab": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_912c275a19cb43cb88b136aface2be8c", "placeholder": "\u200b", "style": "IPY_MODEL_534e03a4319140f1a5f4260ce5becbd9", "tabbable": null, "tooltip": null, "value": "A_to_B\u2007\u2714:\u2007100%"}}, "c301236bcbb54d42aba3b5f9e81ef6f9": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c3b872624e1d4d7e982a74340609d04c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c3bd984f917a4e4789d5ec034dba61ff": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_81e3a1c3742b4bf499b29d330fbafb13", "placeholder": "\u200b", "style": "IPY_MODEL_87ef95156779406db4f080c5705d3289", "tabbable": null, "tooltip": null, "value": "\u2007250/250\u2007[00:02&lt;00:00,\u2007118.24blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=250,\u2007\u2717=0,\u2007\u2205=0]"}}, "c4e2d0ef7a414b44aa97943a969520f1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_705b23ae641e4f61a197ae92529c8f5c", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_3d49c98424504faa91e266f4f33e1b97", "tabbable": null, "tooltip": null, "value": 64.0}}, "c5080998cce044509a381fd9740c1d54": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_c86df4333c074e9fbfbdc256da1cfdd4", "placeholder": "\u200b", "style": "IPY_MODEL_269d11b96a394364be19165af393d0b3", "tabbable": null, "tooltip": null, "value": "Checking-Blocks\u2007\u2717:\u2007\u200784%"}}, "c797b78e400645fdae77522e84edb7f9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "c8515f0b5c784f669bea37b77c18cb1f": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c86df4333c074e9fbfbdc256da1cfdd4": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c971e7a808e04699a3591bf9d7f99ee1": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "cb64de5331e74223881da97516132e07": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_dbf396a0a48342b6987145c741e37af4", "placeholder": "\u200b", "style": "IPY_MODEL_07c664d518c740b7943accf7bb2ca22d", "tabbable": null, "tooltip": null, "value": "\u2007100/100\u2007[00:05&lt;00:00,\u200719.47blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=100,\u2007\u2717=0,\u2007\u2205=0]"}}, "cd6e011b3d304411acf0823765443764": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "ce05c42aa38744f8bb38343ed0b1c159": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ce288c1e91474b9c8b6a2bb41dd7b0dd": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ce31ec1a99574161907469d52dc4fc74": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "d1c433d1da304e0cae397923f0fc9f04": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_f1182b793b6a4d198a6980d6262c1649", "placeholder": "\u200b", "style": "IPY_MODEL_087bd8be61c14303a69252093d21447b", "tabbable": null, "tooltip": null, "value": "fault\u2007tolerance\u2007test\u2007\u2717:\u2007\u200758%"}}, "d24e39fef3754c80a130cab1fe67113e": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d4ae99ede64d490082a62b0b2bd09f96": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "d7a367e95813412abe3824db847f52b8": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_0efd336e66104ca2ac02de2b91bda4db", "max": 64.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_bf31f54dc4d34fb098cf28ca51e25a0d", "tabbable": null, "tooltip": null, "value": 64.0}}, "d7e7a08976d5411199233f2ba5095c06": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d80f34cd52c942d88efe864dad0f7107": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_bf0f0a7650e54181994edc8e4c5def89", "placeholder": "\u200b", "style": "IPY_MODEL_37961f598e3348468ad4978e2cf0c858", "tabbable": null, "tooltip": null, "value": "\u200753/64\u2007[00:00&lt;00:00,\u2007138.33blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=53,\u2007\u2717=11,\u2007\u2205=0]"}}, "d983d0cbd84849109bfb6c987dd13171": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "dbf396a0a48342b6987145c741e37af4": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "dca75b6bba1a437f93fc7542f87bdd0c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "dcbc135db78d493eb6760566c9ca0a96": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_fd56ea4b8e57497ea64906b410233b8e", "IPY_MODEL_1a56d948d8b14b6aa734aaecfd8fa0bd", "IPY_MODEL_947b76502ab74c4a911de4a5afae1fc3"], "layout": "IPY_MODEL_84bfabee06594b17bd19fd0813982633", "tabbable": null, "tooltip": null}}, "df639f4bbd734d97a0fcc8ba26e35ca1": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "dfb6d02f320c4a9f9c303fdcab4f7b64": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e01968ab65164a02a51c8224be4c58e2": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_b25256bd61ab4a61ba4f32a4157f8f6b", "placeholder": "\u200b", "style": "IPY_MODEL_b444e28b306c4f39872d0c4695a77c35", "tabbable": null, "tooltip": null, "value": "\u200716/16\u2007[00:00&lt;00:00,\u2007129.80blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=16,\u2007\u2717=0,\u2007\u2205=0]"}}, "e041877575b944f88a9eaacdd810e124": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_e13403a2a95249a582a97e3245d1fda5", "placeholder": "\u200b", "style": "IPY_MODEL_b5adb116a0c840b1b030e565fd8295a7", "tabbable": null, "tooltip": null, "value": "\u200783/100\u2007[00:00&lt;00:00,\u20071319.06blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=83,\u2007\u2717=17,\u2007\u2205=0]"}}, "e13403a2a95249a582a97e3245d1fda5": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e2107cc241a346b3bc988ec9b492706e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_44b94c99b174463aa097f1ba23a3acdc", "max": 250.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_9054d74108a649c2912a40a0fcfbc51f", "tabbable": null, "tooltip": null, "value": 250.0}}, "e335dfd418cf4d27bf5f4893a217bdb4": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e45c17e171bd47bfbc2de33846e651d8": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "e46662c4c262415e8ad48abf0f985c86": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_0bdad7243a794afe937a7d696bbb6359", "placeholder": "\u200b", "style": "IPY_MODEL_7c2a085de24c47539d3cf98c4606bc7a", "tabbable": null, "tooltip": null, "value": "\u200737/64\u2007[00:00&lt;00:00,\u200750.48blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=37,\u2007\u2717=27,\u2007\u2205=0]"}}, "e95124efa2154a7fad5115c919980594": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ed51efe31ada4a80bae5225148c4f30f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "f099ef02c9ea450481b445126f9d7545": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "f1182b793b6a4d198a6980d6262c1649": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "f2895204c35a41058e762215286affca": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "f3f2932e9bce40068da44325b65ad36b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "f4a70a5a8c1e4f29b66df9cceee108e2": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_9a3881671e7e42f4981fd4620591e655", "placeholder": "\u200b", "style": "IPY_MODEL_e45c17e171bd47bfbc2de33846e651d8", "tabbable": null, "tooltip": null, "value": "valid\u2007\u2714:\u2007100%"}}, "f4b87339c1ca4486b6c95c8c7fbc4c49": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_c8515f0b5c784f669bea37b77c18cb1f", "placeholder": "\u200b", "style": "IPY_MODEL_6cabdc5730874471bfe5911f8a29ab46", "tabbable": null, "tooltip": null, "value": "\u200716/16\u2007[00:02&lt;00:00,\u2007\u20076.39blocks/s,\u2007\u29d7=0,\u2007\u25b6=0,\u2007\u2714=16,\u2007\u2717=0,\u2007\u2205=0]"}}, "f6079c6612154d659eb4aa7a3365bf88": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "fbf69126e164490d90cb6affa89a9b77": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "fd56ea4b8e57497ea64906b410233b8e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_fd967cf35179483586f06e8ba296509f", "placeholder": "\u200b", "style": "IPY_MODEL_7974dcf08b7f42dfaf2710be7660f4cb", "tabbable": null, "tooltip": null, "value": "Smoothing\u2007\u2714:\u2007100%"}}, "fd7291e5c58c40a5b0c244d988f07daa": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_793bfa7e1507408ba855937aac6196b3", "max": 100.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_95dcfedc3e6c43a79d727dcce7912934", "tabbable": null, "tooltip": null, "value": 100.0}}, "fd967cf35179483586f06e8ba296509f": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "fe6aff89f3e6407495bf7bbf381cb2f2": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}}, "version_major": 2, "version_minor": 0}
</script></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Daisy: A Blockwise Task Scheduler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Jan Funke, Tri Nguyen, William Patton, Caroline Malin-Mayor, Arlo Sheridan, Philipp Hanslovsky, Chris Barnes.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>